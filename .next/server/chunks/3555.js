exports.id=3555,exports.ids=[3555],exports.modules={82117:(e,t,s)=>{Promise.resolve().then(s.bind(s,83265))},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>c,Zb:()=>l,aY:()=>o,ll:()=>i});var a=s(10326),r=s(17577),d=s(51223);let l=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,"data-slot":"card",className:(0,d.cn)("rounded-xl border bg-card text-card-foreground","shadow-[0_2px_8px_rgba(0,0,0,0.08)]",e),...t}));l.displayName="Card";let n=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,"data-slot":"card-header",className:(0,d.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let i=r.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,d.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,d.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},83265:(e,t,s)=>{"use strict";s.d(t,{PrealertPage:()=>O});var a=s(10326),r=s(17577),d=s(35047),l=s(3053),n=s(29752),i=s(91664),c=s(41190),o=s(19766),m=s(941),x=s(96633),u=s(32933),h=s(51223);let p=o.fC;o.ZA;let f=o.B4,g=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(o.xz,{ref:r,className:(0,h.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,a.jsx(o.JO,{asChild:!0,children:a.jsx(m.Z,{className:"h-4 w-4 opacity-50"})})]}));g.displayName=o.xz.displayName;let b=r.forwardRef(({className:e,...t},s)=>a.jsx(o.u_,{ref:s,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(x.Z,{className:"h-4 w-4"})}));b.displayName=o.u_.displayName;let j=r.forwardRef(({className:e,...t},s)=>a.jsx(o.$G,{ref:s,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(m.Z,{className:"h-4 w-4"})}));j.displayName=o.$G.displayName;let N=r.forwardRef(({className:e,children:t,position:s="popper",...r},d)=>a.jsx(o.h_,{children:(0,a.jsxs)(o.VY,{ref:d,className:(0,h.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[a.jsx(b,{}),a.jsx(o.l_,{className:(0,h.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(j,{})]})}));N.displayName=o.VY.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(o.__,{ref:s,className:(0,h.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=o.__.displayName;let v=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(o.ck,{ref:r,className:(0,h.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(o.wU,{children:a.jsx(u.Z,{className:"h-4 w-4"})})}),a.jsx(o.eT,{children:t})]}));v.displayName=o.ck.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(o.Z0,{ref:s,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=o.Z0.displayName;var w=s(56627),y=s(48998),k=s(59819),C=s(37202),P=s(22332),S=s(65983),A=s(40765),R=s(88307),$=s(31540),_=s(49216);let E=[{name:"Angongo Hub",batches:["Batch 1","Batch 2"]},{name:"Lipa Hub",batches:["Batch 1"]},{name:"Sto Tomas Hub",batches:["Batch 1","Batch 2","Batch 3"]}];function T(e){if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function D(e){if(!e)return"";let t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/\"/g,'""')}"`:t}function O(){let[e,t]=(0,r.useState)(""),[s,o]=(0,r.useState)("all"),[m,x]=(0,r.useState)(""),u=new Date().toISOString().slice(0,10),[h,b]=(0,r.useState)(u),[j,O]=(0,r.useState)(1),[B,I]=(0,r.useState)(10),[Z,z]=(0,r.useState)(()=>(function(e=50){let t=["Pending","Acknowledged","Pending_Edit","Confirmed"],s=["OpsCoor1","PIC2","OpsCoor3","PIC4","User5","User6"],a=["Team A","Team B","Team C"],r=E.map(e=>e.name);return Array.from({length:e}).map((e,d)=>{let l=r[d%r.length],n=E.find(e=>e.name===l).batches,i=n[d%n.length],c=t[d%t.length],o=s[d%s.length],m="Pending"===c?void 0:a[d%a.length],x=`LH${100+d}`,u=`PLT-${(100+d).toString().slice(-3)}`,h=`2026-01-${String(d%28+1).padStart(2,"0")}`,p=new Date(Date.now()-(d+1)*12e4).toISOString(),f="Pending_Edit"===c?"LH trip mismatch":void 0,g="Pending_Edit"===c?[{id:`edit-${d}`,remarks:"Updated remarks after review.",reason:f||"",editor:o,timestamp:p}]:[];return{id:`r${d+1}`,status:c,reporter:o,hub:l,batch:i,lh_trip:x,plate:u,date:h,dataTeam:m,submittedBy:o,notes:`Sample note for report ${d+1}`,createdAt:p,statusUpdatedAt:p,ackBy:"Pending"===c?void 0:m,ackAt:"Pending"===c?void 0:p,confirmedBy:"Confirmed"===c?m:void 0,confirmedAt:"Confirmed"===c?p:void 0,pendingEditReason:f,editCount:g.length,editHistory:g}})})(30)),[H,L]=(0,r.useState)(null),[U,M]=(0,r.useState)(!1),[V,K]=(0,r.useState)(null),[q,Y]=(0,r.useState)(!1),[G,F]=(0,r.useState)({}),[J,W]=(0,r.useState)(""),[Q,X]=(0,r.useState)("");(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)({});let{toast:ee}=(0,w.pm)(),{user:et}=(0,l.a)(),es=(0,d.usePathname)(),ea=es?.startsWith("/data-team")||et?.role==="Data Team"||et?.role==="Admin",er=(0,r.useCallback)(e=>!!et&&(e.submittedByOpsId&&et.ops_id?e.submittedByOpsId===et.ops_id:e.submittedBy===et.name||e.reporter===et.name),[et]);(0,r.useMemo)(()=>ea?Z.some(e=>"Pending"===e.status):Z.some(e=>"Pending_Edit"===e.status&&er(e)),[Z,ea,er]);let ed=(0,r.useMemo)(()=>{let e={};return Z.forEach(t=>e[t.hub]=(e[t.hub]||0)+1),e},[Z]),el=(0,r.useMemo)(()=>h?Z.filter(e=>e.date===h):Z,[Z,h]),en=el.filter(e=>"Pending"===e.status).length,ei=el.filter(e=>"Acknowledged"===e.status).length,ec=el.filter(e=>"Confirmed"===e.status).length,eo=(0,r.useMemo)(()=>Z.filter(t=>{if(m&&t.hub!==m||"all"!==s&&("Pending"===s&&"Pending"!==t.status||"Acknowledged"===s&&"Acknowledged"!==t.status||"Pending_Edit"===s&&"Pending_Edit"!==t.status||"Confirmed"===s&&"Confirmed"!==t.status)||h&&t.date!==h)return!1;if(e){let s=e.toLowerCase();if(!(t.reporter.toLowerCase().includes(s)||t.hub.toLowerCase().includes(s)||t.batch.toLowerCase().includes(s)||(t.lh_trip||"").toLowerCase().includes(s)||(t.plate||"").toLowerCase().includes(s)))return!1}return!0}),[Z,m,s,h,e]),em=Math.max(1,Math.ceil(eo.length/B)),ex=eo.slice((j-1)*B,j*B),eu=e=>{switch(e){case"Pending":return{label:"Pending",icon:a.jsx(y.Z,{className:"h-4 w-4 text-yellow-600"}),className:"bg-yellow-50 text-yellow-700 border border-yellow-200"};case"Acknowledged":return{label:"Acknowledged",icon:a.jsx(k.Z,{className:"h-4 w-4 text-blue-600"}),className:"bg-blue-50 text-blue-700 border border-blue-200"};case"Pending_Edit":return{label:"Pending Edit",icon:a.jsx(C.Z,{className:"h-4 w-4 text-red-600"}),className:"bg-red-50 text-red-700 border border-red-200"};case"Confirmed":return{label:"Confirmed",icon:a.jsx(P.Z,{className:"h-4 w-4 text-green-600"}),className:"bg-green-50 text-green-700 border border-green-200"};default:return{label:e,icon:null,className:"bg-muted text-muted-foreground"}}},eh="Pending"===s,ep="Acknowledged"===s,ef="Confirmed"===s,eg=(e,t)=>{L({hub:e,batch:t}),M(!0)},eb=e=>{K(e),W(e.pendingEditReason||""),X(""),Y(!0)},ej=(e,t)=>{z(s=>{let a=!1,r=s.map(s=>{if(s.id!==e)return s;let r=t(s);return r!==s&&(a=!0),r});return a?r:s})},eN=e=>{if(!et){ee({variant:"destructive",title:"Login required",description:"Please log in first."});return}ej(e.id,e=>e.dataTeam?e:{...e,dataTeam:et.name,dataTeamOpsId:et.ops_id}),ee({title:"Ownership assigned",description:`Assigned to ${et.name}`})},ev=e=>{if(!et)return;let t=new Date().toISOString();ej(e.id,e=>"Pending"!==e.status?e:{...e,status:"Acknowledged",ackBy:et.name,ackAt:t,dataTeam:e.dataTeam||et.name,dataTeamOpsId:e.dataTeamOpsId||et.ops_id,statusUpdatedAt:t}),ee({title:"Acknowledged",description:`${e.id} acknowledged by ${et.name}`})},ew=e=>{if(!et)return;if(!J.trim()){ee({variant:"destructive",title:"Reason required",description:"Add a reason before sending Pending Edit."});return}let t=new Date().toISOString();ej(e.id,e=>({...e,status:"Pending_Edit",pendingEditReason:J.trim(),ackBy:e.ackBy||et.name,ackAt:e.ackAt||t,dataTeam:e.dataTeam||et.name,dataTeamOpsId:e.dataTeamOpsId||et.ops_id,statusUpdatedAt:t})),ee({title:"Pending Edit sent",description:`${e.id} returned to Ops PIC.`})},ey=e=>{if(!et)return;let t=new Date().toISOString(),s={...e,status:"Confirmed",confirmedBy:et.name,confirmedAt:t,dataTeam:e.dataTeam||et.name,dataTeamOpsId:e.dataTeamOpsId||et.ops_id,statusUpdatedAt:t};ej(e.id,()=>s);let a=[s.id,s.lh_trip||"",s.hub,s.batch,s.plate||"",s.status,s.confirmedBy||"",s.confirmedAt||""],r=new Blob([`dispatch_id,lh_trip,hub,batch,plate,status,confirmed_by,confirmed_at
${a.map(D).join(",")}`],{type:"text/csv;charset=utf-8;"}),d=window.URL.createObjectURL(r),l=document.createElement("a");l.href=d,l.download=`dispatch-${s.id}.csv`,l.click(),window.URL.revokeObjectURL(d),ee({title:"Confirmed",description:"CSV downloaded. Seatalk and email dispatch queued."})},ek=e=>{if(!et)return;if(!Q.trim()){ee({variant:"destructive",title:"Remarks required",description:"Add remarks before resubmitting."});return}let t=new Date().toISOString();ej(e.id,e=>{let s={id:`${e.id}-${Date.now()}`,remarks:Q.trim(),reason:e.pendingEditReason||"",editor:et.name,timestamp:t},a=e.editHistory?[...e.editHistory,s]:[s];return{...e,status:"Pending",pendingEditReason:void 0,editCount:(e.editCount||0)+1,editHistory:a,notes:Q.trim(),statusUpdatedAt:t}}),ee({title:"Resubmitted",description:`${e.id} returned to Data Team queue.`}),X("")};return(0,a.jsxs)("div",{className:"flex gap-6",children:[a.jsx("aside",{className:"w-72",children:(0,a.jsxs)(n.Zb,{className:"sticky top-6",children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-lg",children:"Hubs"}),a.jsx(n.SZ,{className:"text-sm",children:"Compact list"})]}),a.jsx(n.aY,{children:a.jsx("ul",{className:"space-y-3 relative max-h-[60vh] overflow-y-auto pr-2",children:E.map(e=>(0,a.jsxs)("li",{className:"relative",children:[a.jsx("div",{className:"flex items-center justify-between gap-2",children:(0,a.jsxs)("button",{"aria-expanded":!!m&&m===e.name,"aria-controls":`batches-${e.name}`,onClick:()=>{x(m===e.name?"":e.name),F(t=>({...t,[e.name]:!t[e.name]})),O(1)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),x(m===e.name?"":e.name),F(t=>({...t,[e.name]:!t[e.name]})),O(1))},className:`flex items-center gap-3 px-3 py-3 rounded w-full text-left ${m===e.name?"bg-muted/20":"hover:bg-muted/10"}`,children:[a.jsx(S.Z,{className:"h-5 w-5 text-gradient"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[ed[e.name]||0," reports"]})]})]})}),a.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-muted/20 ml-1","aria-hidden":!0}),a.jsx("ul",{id:`batches-${e.name}`,className:`ml-9 mt-2 text-base text-muted-foreground space-y-2 ${G[e.name]?"block":"hidden"}`,children:e.batches.map(t=>a.jsx("li",{children:(0,a.jsxs)("button",{className:"flex items-center gap-2 py-2 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-400 rounded",onClick:()=>eg(e.name,t),onKeyDown:s=>{"Enter"===s.key&&eg(e.name,t)},children:[a.jsx(A.Z,{className:"h-4 w-4 text-blue-500 mr-1","aria-hidden":!0}),a.jsx("span",{children:t})]})},t))})]},e.name))})})]})}),(0,a.jsxs)("div",{className:"flex-1 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{role:"button",tabIndex:0,"aria-label":"Pending reports","aria-pressed":eh,onClick:()=>{o(eh?"all":"Pending"),O(1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o(eh?"all":"Pending"),O(1))},className:`cursor-pointer bg-white rounded-xl shadow-sm p-4 flex items-center gap-4 transform transition-all duration-150 border-r border-muted/20 pr-6 ${eh?"ring-2 ring-yellow-300 scale-105":"hover:scale-105"}`,children:[a.jsx("div",{className:`${eh?"inline-flex items-center justify-center h-16 w-16 rounded-full bg-yellow-600 text-white":"inline-flex items-center justify-center h-16 w-16 rounded-full bg-yellow-50 text-yellow-700"}`,children:a.jsx(y.Z,{className:"h-8 w-8","aria-hidden":!0})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"}),a.jsx("div",{className:"text-3xl font-extrabold",children:en}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:h})]})]}),(0,a.jsxs)("div",{role:"button",tabIndex:0,"aria-label":"Acknowledged reports","aria-pressed":ep,onClick:()=>{o(ep?"all":"Acknowledged"),O(1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o(ep?"all":"Acknowledged"),O(1))},className:`cursor-pointer bg-white rounded-xl shadow-sm p-4 flex items-center gap-4 transform transition-all duration-150 border-r border-muted/20 pr-6 ${ep?"ring-2 ring-blue-300 scale-105":"hover:scale-105"}`,children:[a.jsx("div",{className:`${ep?"inline-flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white":"inline-flex items-center justify-center h-16 w-16 rounded-full bg-blue-50 text-blue-700"}`,children:a.jsx(k.Z,{className:"h-8 w-8","aria-hidden":!0})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Acknowledged"}),a.jsx("div",{className:"text-3xl font-extrabold",children:ei}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:h})]})]}),(0,a.jsxs)("div",{role:"button",tabIndex:0,"aria-label":"Confirmed reports","aria-pressed":ef,onClick:()=>{o(ef?"all":"Confirmed"),O(1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o(ef?"all":"Confirmed"),O(1))},className:`cursor-pointer bg-white rounded-xl shadow-sm p-4 flex items-center gap-4 transform transition-all duration-150 ${ef?"ring-2 ring-green-300 scale-105":"hover:scale-105"}`,children:[a.jsx("div",{className:`${ef?"inline-flex items-center justify-center h-16 w-16 rounded-full bg-green-600 text-white":"inline-flex items-center justify-center h-16 w-16 rounded-full bg-green-50 text-green-700"}`,children:a.jsx(P.Z,{className:"h-8 w-8","aria-hidden":!0})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Confirmed"}),a.jsx("div",{className:"text-3xl font-extrabold",children:ec}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:h})]})]})]})}),a.jsx("div",{className:"my-6","aria-hidden":!0,children:a.jsx("div",{className:"h-0.5 w-full rounded shadow-sm bg-gradient-to-r from-sky-400 to-indigo-600"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(R.Z,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),a.jsx(c.I,{placeholder:"Search reporter, hub, LHTrip, plate...",className:"pl-11 w-96 text-base",value:e,onChange:e=>{t(e.target.value),O(1)},"aria-label":"Search reports"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(p,{value:s,onValueChange:e=>{o(e),O(1)},children:[a.jsx(g,{children:a.jsx(f,{placeholder:"All statuses"})}),(0,a.jsxs)(N,{children:[a.jsx(v,{value:"all",children:"All statuses"}),a.jsx(v,{value:"Pending",children:"Pending"}),a.jsx(v,{value:"Acknowledged",children:"Acknowledged"}),a.jsx(v,{value:"Pending_Edit",children:"Pending Edit"}),a.jsx(v,{value:"Confirmed",children:"Confirmed"})]})]}),a.jsx(c.I,{type:"date",value:h,onChange:e=>{b(e.target.value),O(1)},"aria-label":"Date"}),a.jsx(i.z,{variant:"outline",onClick:()=>{t(""),x(""),o("all"),b(""),O(1)},children:"Reset"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm",children:"Rows"}),(0,a.jsxs)(p,{value:String(B),onValueChange:e=>{I(Number(e)),O(1)},children:[a.jsx(g,{children:a.jsx(f,{placeholder:"10"})}),(0,a.jsxs)(N,{children:[a.jsx(v,{value:"10",children:"10"}),a.jsx(v,{value:"25",children:"25"}),a.jsx(v,{value:"50",children:"50"})]})]})]}),(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>{ee({title:"Export",description:"CSV export is not yet configured."})},children:[a.jsx($.Z,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{className:"text-xl",children:"Dispatch Entries"}),(0,a.jsxs)(n.SZ,{className:"text-sm",children:["Showing ",eo.length," entries, page ",j," / ",em]})]}),a.jsx(n.aY,{children:0===eo.length?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-muted-foreground text-base",children:"No entries found"})}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full text-base border-collapse border border-muted/20",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-muted/50",children:[a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Status"}),a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Reporter"}),a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Hub"}),a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Batch"}),a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"LHTrip"}),a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Plate"}),a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Date"}),a.jsx("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Owner"}),a.jsx("th",{className:"p-3 text-center last:border-r-0",children:"Actions"})]})}),a.jsx("tbody",{children:ex.map(e=>{let t=eu(e.status),s=ea?"Pending"===e.status:"Pending_Edit"===e.status&&er(e);return(0,a.jsxs)("tr",{className:`border-b hover:shadow-md hover:-translate-y-0.5 transition-all group ${s?"blink-red ring-1 ring-red-300":""}`,tabIndex:0,onKeyDown:t=>{"Enter"===t.key&&eb(e)},"aria-label":`Report ${e.id} by ${e.reporter}`,children:[a.jsx("td",{className:"p-3 align-middle text-center border-r border-muted/20 last:border-r-0",children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-medium ${t.className}`,children:[t.icon,a.jsx("span",{className:"whitespace-nowrap",children:t.label})]})}),a.jsx("td",{className:"p-3 align-middle text-base border-r border-muted/20 last:border-r-0",children:e.reporter}),a.jsx("td",{className:"p-3 align-middle text-base border-r border-muted/20 last:border-r-0",children:e.hub}),a.jsx("td",{className:"p-3 align-middle text-base border-r border-muted/20 last:border-r-0",children:e.batch}),a.jsx("td",{className:"p-3 align-middle font-mono border-r border-muted/20 last:border-r-0",children:e.lh_trip}),a.jsx("td",{className:"p-3 align-middle font-mono border-r border-muted/20 last:border-r-0",children:e.plate}),a.jsx("td",{className:"p-3 align-middle border-r border-muted/20 last:border-r-0",children:e.date}),a.jsx("td",{className:"p-3 align-middle border-r border-muted/20 last:border-r-0",children:e.dataTeam||"-"}),a.jsx("td",{className:"p-3 align-middle",children:a.jsx(i.z,{size:"sm",variant:"ghost","aria-label":`Open details for ${e.id}`,onClick:()=>eb(e),children:a.jsx(_.Z,{})})})]},e.id)})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",ex.length," of ",eo.length," entries"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(i.z,{size:"sm",variant:"outline",onClick:()=>O(Math.max(1,j-1)),disabled:1===j,children:"Previous"}),(0,a.jsxs)("div",{className:"text-sm",children:["Page ",j," / ",em]}),a.jsx(i.z,{size:"sm",variant:"outline",onClick:()=>O(Math.min(em,j+1)),disabled:j===em,children:"Next"})]})]})]})})]}),U&&H&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,a.jsxs)("div",{className:"w-full max-w-3xl bg-background rounded shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold",children:[H.hub," - ",H.batch]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(i.z,{variant:"outline",onClick:()=>{L(null),M(!1)},children:"Close"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Reports in this batch"}),a.jsx("div",{className:"overflow-y-auto max-h-72",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[a.jsx("th",{className:"p-2 text-left",children:"Reporter"}),a.jsx("th",{className:"p-2 text-left",children:"Hub"}),a.jsx("th",{className:"p-2 text-left",children:"Batch"}),a.jsx("th",{className:"p-2 text-left",children:"LHTrip"}),a.jsx("th",{className:"p-2 text-left",children:"Plate"}),a.jsx("th",{className:"p-2 text-left",children:"Date"}),a.jsx("th",{className:"p-2 text-left",children:"Owner"}),a.jsx("th",{className:"p-2 text-left",children:"Status"}),a.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),a.jsx("tbody",{children:Z.filter(e=>e.hub===H.hub&&e.batch===H.batch).map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-muted/10",children:[a.jsx("td",{className:"p-2",children:e.reporter}),a.jsx("td",{className:"p-2",children:e.hub}),a.jsx("td",{className:"p-2",children:e.batch}),a.jsx("td",{className:"p-2",children:e.lh_trip}),a.jsx("td",{className:"p-2",children:e.plate}),a.jsx("td",{className:"p-2",children:e.date}),a.jsx("td",{className:"p-2",children:e.dataTeam||"-"}),a.jsx("td",{className:"p-2",children:e.status}),a.jsx("td",{className:"p-2",children:a.jsx(i.z,{size:"sm",variant:"outline",onClick:()=>eb(e),children:"Details"})})]},e.id))})]})})]})]})}),q&&V&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl bg-background rounded shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-2xl font-semibold",children:"Report Details"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",V.id," - ",V.date]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(i.z,{variant:"ghost",onClick:()=>{K(null),Y(!1),W(""),X("")},children:"Close"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-base",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Reporter"}),a.jsx("div",{className:"font-medium",children:V.reporter})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Hub"}),a.jsx("div",{className:"font-medium",children:V.hub})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Batch"}),a.jsx("div",{className:"font-medium",children:V.batch})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Owner"}),a.jsx("div",{className:"font-medium",children:V.dataTeam||"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"LH Trip"}),a.jsx("div",{className:"font-mono",children:V.lh_trip})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Plate"}),a.jsx("div",{className:"font-mono",children:V.plate})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),a.jsx("div",{className:"font-medium",children:V.status})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Acknowledged"}),a.jsx("div",{className:"font-medium",children:V.ackBy?`${V.ackBy} (${T(V.ackAt)})`:"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Confirmed"}),a.jsx("div",{className:"font-medium",children:V.confirmedBy?`${V.confirmedBy} (${T(V.confirmedAt)})`:"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Notes"}),a.jsx("div",{className:"font-medium",children:V.notes||"-"})]})]}),V.pendingEditReason&&(0,a.jsxs)("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:["Pending Edit Reason: ",V.pendingEditReason]}),V.editHistory&&V.editHistory.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Edit History"}),a.jsx("div",{className:"space-y-2",children:V.editHistory.map(e=>(0,a.jsxs)("div",{className:"rounded border border-muted/30 p-3 text-sm",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.editor," - ",T(e.timestamp)]}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:["Reason: ",e.reason||"-"]}),(0,a.jsxs)("div",{children:["Remarks: ",e.remarks]})]},e.id))})]}),ea&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[!V.dataTeam&&a.jsx(i.z,{variant:"outline",onClick:()=>eN(V),children:"Take Ownership"}),"Pending"===V.status&&a.jsx(i.z,{onClick:()=>ev(V),children:"Acknowledge"}),("Pending"===V.status||"Acknowledged"===V.status)&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm text-muted-foreground",children:"Pending Edit Reason"}),a.jsx("textarea",{value:J,onChange:e=>W(e.target.value),className:"w-full min-h-[90px] rounded border border-muted/30 p-2 text-sm",placeholder:"Describe the discrepancy..."}),a.jsx(i.z,{variant:"destructive",onClick:()=>ew(V),children:"Send Pending Edit"})]}),"Acknowledged"===V.status&&a.jsx(i.z,{onClick:()=>ey(V),children:"Confirm and Download CSV"})]}),!ea&&"Pending_Edit"===V.status&&er(V)&&(0,a.jsxs)("div",{className:"mt-6 space-y-2",children:[a.jsx("label",{className:"text-sm text-muted-foreground",children:"Updated Remarks"}),a.jsx("textarea",{value:Q,onChange:e=>X(e.target.value),className:"w-full min-h-[90px] rounded border border-muted/30 p-2 text-sm",placeholder:"Update remarks and resubmit..."}),a.jsx(i.z,{onClick:()=>ek(V),children:"Resubmit Report"})]})]})})]})]})}},48434:(e,t,s)=>{"use strict";s.d(t,{S:()=>a});let a=(0,s(68570).createProxy)(String.raw`C:\Users\phlspxuser\Documents\Mrkcde\Ongoing\soc5-internalTool\src\screens\prealert.tsx#PrealertPage`)}};