"use strict";(()=>{var e={};e.id=7716,e.ids=[7716],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},85807:e=>{e.exports=require("module")},55315:e=>{e.exports=require("path")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},6162:e=>{e.exports=require("worker_threads")},8678:e=>{e.exports=import("pg")},92761:e=>{e.exports=require("node:async_hooks")},6005:e=>{e.exports=require("node:crypto")},65714:e=>{e.exports=require("node:diagnostics_channel")},15673:e=>{e.exports=require("node:events")},70612:e=>{e.exports=require("node:os")},49411:e=>{e.exports=require("node:path")},69016:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>p,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>d});var o=r(49303),a=r(88716),n=r(60670),i=r(4418),u=e([i]);i=(u.then?(await u)():u)[0];let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/logout/route",pathname:"/api/auth/logout",filename:"route",bundlePath:"app/api/auth/logout/route"},resolvedPagePath:"C:\\Users\\phlspxuser\\Documents\\Mrkcde\\Ongoing\\soc5-internalTool\\src\\app\\api\\auth\\logout\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:x}=c,h="/api/auth/logout/route";function p(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:d})}s()}catch(e){s(e)}})},4418:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{POST:()=>d});var o=r(87070),a=r(95456),n=r(11958),i=r(76097),u=r(84235),p=r(21067),c=e([a,i]);[a,i]=c.then?(await c)():c;let l=p.Ry({}).strict(),d=(0,n.g)("/api/auth/logout",async e=>{let t=await (0,u.Y)(e,l);if(t.errorResponse)return t.errorResponse;let r=await (0,a.Gg)();if(r){let e=await (0,i.l)(r.sessionId);if(!e.allowed)return o.NextResponse.json({error:"Too many requests"},{status:429,headers:{"Retry-After":String(e.retryAfterSeconds)}})}let s=(0,a.Dp)();s&&await (0,a.SO)(s);let n=o.NextResponse.json({success:!0});return(0,a.Rf)(n),n});s()}catch(e){s(e)}})},76097:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{l:()=>i});var o=r(75748),a=e([o]);function n(e,t){if(!e)return t;let r=Number(e);return!Number.isFinite(r)||r<=0?t:r}o=(a.then?(await a)():a)[0];let u=n(process.env.RATE_LIMIT_WINDOW_MS,6e4),p=n(process.env.RATE_LIMIT_MAX_REQUESTS,60);async function i(e,t){let r=t?.windowMs??u,s=t?.limit??p,a=`${Math.max(1,Math.floor(r/1e3))} seconds`,n=(await (0,o.I)(`INSERT INTO session_rate_limits (session_id, count, expires_at)
     VALUES ($1, 1, NOW() + $2::interval)
     ON CONFLICT (session_id)
     DO UPDATE SET
       count = CASE WHEN session_rate_limits.expires_at < NOW() THEN 1 ELSE session_rate_limits.count + 1 END,
       expires_at = CASE WHEN session_rate_limits.expires_at < NOW() THEN NOW() + $2::interval ELSE session_rate_limits.expires_at END
     RETURNING count, expires_at`,[e,a])).rows[0];if((n?.count??s+1)>s){let e=n?.expires_at?new Date(n.expires_at).getTime():Date.now()+r,t=Math.max(1,Math.ceil((e-Date.now())/1e3));return{allowed:!1,retryAfterSeconds:t,limit:s}}return{allowed:!0,retryAfterSeconds:0,limit:s}}s()}catch(e){s(e)}})},84235:(e,t,r)=>{r.d(t,{Y:()=>o});var s=r(87070);async function o(e,t){let r=await e.json().catch(()=>void 0),o=t.safeParse(r??{});if(!o.success){let e=o.error.flatten(),t=o.error.errors[0]?.message||"Invalid request";return{errorResponse:s.NextResponse.json({error:t,details:e},{status:400})}}return{data:o.data}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,7936,1067,5456],()=>r(69016));module.exports=s})();