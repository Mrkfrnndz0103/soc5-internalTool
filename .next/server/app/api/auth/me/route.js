"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/me/route";
exports.ids = ["app/api/auth/me/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("module");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_spxph4227_Desktop_soc5_centralized_data_1_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/me/route.ts */ \"(rsc)/./src/app/api/auth/me/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([C_Users_spxph4227_Desktop_soc5_centralized_data_1_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\nC_Users_spxph4227_Desktop_soc5_centralized_data_1_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/me/route\",\n        pathname: \"/api/auth/me\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/me/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\spxph4227\\\\Desktop\\\\soc5-centralized-data-1\\\\src\\\\app\\\\api\\\\auth\\\\me\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_spxph4227_Desktop_soc5_centralized_data_1_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/me/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNzcHhwaDQyMjclNUNEZXNrdG9wJTVDc29jNS1jZW50cmFsaXplZC1kYXRhLTElNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q3NweHBoNDIyNyU1Q0Rlc2t0b3AlNUNzb2M1LWNlbnRyYWxpemVkLWRhdGEtMSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDeUM7QUFDdEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vdXRib3VuZC1pbnRlcm5hbC10b29sLz83YThmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHNweHBoNDIyN1xcXFxEZXNrdG9wXFxcXHNvYzUtY2VudHJhbGl6ZWQtZGF0YS0xXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxcbWVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvbWUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL21lXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL21lL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcc3B4cGg0MjI3XFxcXERlc2t0b3BcXFxcc29jNS1jZW50cmFsaXplZC1kYXRhLTFcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxtZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9tZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/me/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/auth/me/route.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_request_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/request-context */ \"(rsc)/./src/lib/request-context.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst GET = (0,_lib_request_context__WEBPACK_IMPORTED_MODULE_2__.withRequestLogging)(\"/api/auth/me\", async (_request)=>{\n    const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getSession)();\n    if (!session) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        user: session.user\n    });\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL21lL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEM7QUFDSDtBQUNtQjtBQUVuRCxNQUFNRyxNQUFNRCx3RUFBa0JBLENBQUMsZ0JBQWdCLE9BQU9FO0lBQzNELE1BQU1DLFVBQVUsTUFBTUoscURBQVVBO0lBQ2hDLElBQUksQ0FBQ0ksU0FBUztRQUNaLE9BQU9MLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFlLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3BFO0lBRUEsT0FBT1IscURBQVlBLENBQUNNLElBQUksQ0FBQztRQUFFRyxNQUFNSixRQUFRSSxJQUFJO0lBQUM7QUFDaEQsR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL291dGJvdW5kLWludGVybmFsLXRvb2wvLi9zcmMvYXBwL2FwaS9hdXRoL21lL3JvdXRlLnRzPzU4YmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcclxuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gXCJAL2xpYi9hdXRoXCJcclxuaW1wb3J0IHsgd2l0aFJlcXVlc3RMb2dnaW5nIH0gZnJvbSBcIkAvbGliL3JlcXVlc3QtY29udGV4dFwiXHJcblxyXG5leHBvcnQgY29uc3QgR0VUID0gd2l0aFJlcXVlc3RMb2dnaW5nKFwiL2FwaS9hdXRoL21lXCIsIGFzeW5jIChfcmVxdWVzdDogUmVxdWVzdCkgPT4ge1xyXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKClcclxuICBpZiAoIXNlc3Npb24pIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSlcclxuICB9XHJcblxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHVzZXI6IHNlc3Npb24udXNlciB9KVxyXG59KVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2Vzc2lvbiIsIndpdGhSZXF1ZXN0TG9nZ2luZyIsIkdFVCIsIl9yZXF1ZXN0Iiwic2Vzc2lvbiIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/me/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSessionCookie: () => (/* binding */ clearSessionCookie),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   deleteSession: () => (/* binding */ deleteSession),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionIdFromCookies: () => (/* binding */ getSessionIdFromCookies),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie)\n/* harmony export */ });\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! server-only */ \"(rsc)/./node_modules/next/dist/compiled/server-only/empty.js\");\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(server_only__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _lib_request_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/request-context */ \"(rsc)/./src/lib/request-context.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_2__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst SESSION_COOKIE_NAME = \"soc5_session\";\nconst SESSION_TTL_HOURS = Number(process.env.SESSION_TTL_HOURS || \"12\") || 12;\nconst SESSION_REFRESH_MINUTES = Number(process.env.SESSION_REFRESH_MINUTES || \"10\") || 10;\nfunction isSecureCookie() {\n    if (process.env.COOKIE_SECURE) return process.env.COOKIE_SECURE === \"true\";\n    return \"development\" === \"production\";\n}\nfunction getCookieDomain() {\n    const domain = process.env.COOKIE_DOMAIN;\n    return domain && domain !== \"localhost\" ? domain : undefined;\n}\nfunction cookieOptions(maxAgeSeconds) {\n    return {\n        httpOnly: true,\n        secure: isSecureCookie(),\n        sameSite: \"lax\",\n        path: \"/\",\n        domain: getCookieDomain(),\n        maxAge: maxAgeSeconds\n    };\n}\nfunction getSessionIdFromCookies() {\n    return (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().get(SESSION_COOKIE_NAME)?.value || null;\n}\nasync function createSession(opsId) {\n    const expiresAt = new Date(Date.now() + SESSION_TTL_HOURS * 60 * 60 * 1000);\n    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.query)(`INSERT INTO auth_sessions (ops_id, expires_at)\r\n     VALUES ($1, $2)\r\n     RETURNING session_id`, [\n        opsId,\n        expiresAt\n    ]);\n    return {\n        sessionId: result.rows[0].session_id,\n        expiresAt\n    };\n}\nasync function deleteSession(sessionId) {\n    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.query)(\"DELETE FROM auth_sessions WHERE session_id = $1\", [\n        sessionId\n    ]);\n}\nasync function getSession() {\n    const sessionId = getSessionIdFromCookies();\n    if (!sessionId) return null;\n    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.query)(`SELECT s.session_id,\r\n            s.expires_at,\r\n            s.last_seen_at,\r\n            u.ops_id,\r\n            u.name,\r\n            u.role,\r\n            u.email,\r\n            u.department\r\n     FROM auth_sessions s\r\n     JOIN users u ON u.ops_id = s.ops_id\r\n     WHERE s.session_id = $1\r\n       AND s.expires_at > NOW()\r\n     LIMIT 1`, [\n        sessionId\n    ]);\n    if (result.rows.length === 0) {\n        return null;\n    }\n    const row = result.rows[0];\n    const now = Date.now();\n    const lastSeen = row.last_seen_at ? new Date(row.last_seen_at).getTime() : 0;\n    const route = (0,_lib_request_context__WEBPACK_IMPORTED_MODULE_3__.getRequestContext)()?.route;\n    const isApiRequest = route ? route.startsWith(\"/api/\") : false;\n    if (isApiRequest && (!lastSeen || now - lastSeen > SESSION_REFRESH_MINUTES * 60 * 1000)) {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.query)(\"UPDATE auth_sessions SET last_seen_at = NOW() WHERE session_id = $1\", [\n            row.session_id\n        ]);\n    }\n    return {\n        sessionId: row.session_id,\n        user: {\n            ops_id: row.ops_id,\n            name: row.name,\n            role: row.role,\n            email: row.email || undefined,\n            department: row.department || undefined\n        }\n    };\n}\nfunction setSessionCookie(response, sessionId) {\n    const maxAge = Math.max(1, Math.floor(SESSION_TTL_HOURS * 60 * 60));\n    const options = cookieOptions(maxAge);\n    const cookieJar = response.cookies;\n    if (cookieJar?.set) {\n        cookieJar.set(SESSION_COOKIE_NAME, sessionId, options);\n    }\n}\nfunction clearSessionCookie(response) {\n    const options = cookieOptions(0);\n    const cookieJar = response.cookies;\n    if (cookieJar?.set) {\n        cookieJar.set(SESSION_COOKIE_NAME, \"\", options);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzlCLE1BQU1tQyxZQUFZLFNBQWtCeEQsT0FBTztJQUMzQyxJQUFJd0QsV0FBV0MsS0FBSztRQUNsQkQsVUFBVUMsR0FBRyxDQUFDdEQscUJBQXFCNEIsV0FBV3dCO0lBQ2hEO0FBQ0Y7QUFFTyxTQUFTRyxtQkFBbUJQLFFBQWtCO0lBQ25ELE1BQU1JLFVBQVV4QyxjQUFjO0lBQzlCLE1BQU15QyxZQUFZLFNBQWtCeEQsT0FBTztJQUMzQyxJQUFJd0QsV0FBV0MsS0FBSztRQUNsQkQsVUFBVUMsR0FBRyxDQUFDdEQscUJBQXFCLElBQUlvRDtJQUN6QztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3V0Ym91bmQtaW50ZXJuYWwtdG9vbC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcInNlcnZlci1vbmx5XCJcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIlxyXG5pbXBvcnQgeyBxdWVyeSB9IGZyb20gXCJAL2xpYi9kYlwiXHJcbmltcG9ydCB7IGdldFJlcXVlc3RDb250ZXh0IH0gZnJvbSBcIkAvbGliL3JlcXVlc3QtY29udGV4dFwiXHJcblxyXG5leHBvcnQgdHlwZSBTZXNzaW9uVXNlciA9IHtcclxuICBvcHNfaWQ/OiBzdHJpbmdcclxuICBuYW1lOiBzdHJpbmdcclxuICByb2xlOiBcIkZURVwiIHwgXCJCYWNrcm9vbVwiIHwgXCJEYXRhIFRlYW1cIiB8IFwiQWRtaW5cIlxyXG4gIGVtYWlsPzogc3RyaW5nXHJcbiAgZGVwYXJ0bWVudD86IHN0cmluZ1xyXG59XHJcblxyXG5jb25zdCBTRVNTSU9OX0NPT0tJRV9OQU1FID0gXCJzb2M1X3Nlc3Npb25cIlxyXG5jb25zdCBTRVNTSU9OX1RUTF9IT1VSUyA9IE51bWJlcihwcm9jZXNzLmVudi5TRVNTSU9OX1RUTF9IT1VSUyB8fCBcIjEyXCIpIHx8IDEyXHJcbmNvbnN0IFNFU1NJT05fUkVGUkVTSF9NSU5VVEVTID0gTnVtYmVyKHByb2Nlc3MuZW52LlNFU1NJT05fUkVGUkVTSF9NSU5VVEVTIHx8IFwiMTBcIikgfHwgMTBcclxuXHJcbmZ1bmN0aW9uIGlzU2VjdXJlQ29va2llKCkge1xyXG4gIGlmIChwcm9jZXNzLmVudi5DT09LSUVfU0VDVVJFKSByZXR1cm4gcHJvY2Vzcy5lbnYuQ09PS0lFX1NFQ1VSRSA9PT0gXCJ0cnVlXCJcclxuICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvb2tpZURvbWFpbigpIHtcclxuICBjb25zdCBkb21haW4gPSBwcm9jZXNzLmVudi5DT09LSUVfRE9NQUlOXHJcbiAgcmV0dXJuIGRvbWFpbiAmJiBkb21haW4gIT09IFwibG9jYWxob3N0XCIgPyBkb21haW4gOiB1bmRlZmluZWRcclxufVxyXG5cclxuZnVuY3Rpb24gY29va2llT3B0aW9ucyhtYXhBZ2VTZWNvbmRzPzogbnVtYmVyKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgc2VjdXJlOiBpc1NlY3VyZUNvb2tpZSgpLFxyXG4gICAgc2FtZVNpdGU6IFwibGF4XCIgYXMgY29uc3QsXHJcbiAgICBwYXRoOiBcIi9cIixcclxuICAgIGRvbWFpbjogZ2V0Q29va2llRG9tYWluKCksXHJcbiAgICBtYXhBZ2U6IG1heEFnZVNlY29uZHMsXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Vzc2lvbklkRnJvbUNvb2tpZXMoKSB7XHJcbiAgcmV0dXJuIGNvb2tpZXMoKS5nZXQoU0VTU0lPTl9DT09LSUVfTkFNRSk/LnZhbHVlIHx8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24ob3BzSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBTRVNTSU9OX1RUTF9IT1VSUyAqIDYwICogNjAgKiAxMDAwKVxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PHsgc2Vzc2lvbl9pZDogc3RyaW5nIH0+KFxyXG4gICAgYElOU0VSVCBJTlRPIGF1dGhfc2Vzc2lvbnMgKG9wc19pZCwgZXhwaXJlc19hdClcclxuICAgICBWQUxVRVMgKCQxLCAkMilcclxuICAgICBSRVRVUk5JTkcgc2Vzc2lvbl9pZGAsXHJcbiAgICBbb3BzSWQsIGV4cGlyZXNBdF1cclxuICApXHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzZXNzaW9uSWQ6IHJlc3VsdC5yb3dzWzBdLnNlc3Npb25faWQsXHJcbiAgICBleHBpcmVzQXQsXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZykge1xyXG4gIGF3YWl0IHF1ZXJ5KFwiREVMRVRFIEZST00gYXV0aF9zZXNzaW9ucyBXSEVSRSBzZXNzaW9uX2lkID0gJDFcIiwgW3Nlc3Npb25JZF0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uKCkge1xyXG4gIGNvbnN0IHNlc3Npb25JZCA9IGdldFNlc3Npb25JZEZyb21Db29raWVzKClcclxuICBpZiAoIXNlc3Npb25JZCkgcmV0dXJuIG51bGxcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8e1xyXG4gICAgc2Vzc2lvbl9pZDogc3RyaW5nXHJcbiAgICBleHBpcmVzX2F0OiBEYXRlXHJcbiAgICBsYXN0X3NlZW5fYXQ6IERhdGUgfCBudWxsXHJcbiAgICBvcHNfaWQ6IHN0cmluZ1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICByb2xlOiBTZXNzaW9uVXNlcltcInJvbGVcIl1cclxuICAgIGVtYWlsOiBzdHJpbmcgfCBudWxsXHJcbiAgICBkZXBhcnRtZW50OiBzdHJpbmcgfCBudWxsXHJcbiAgfT4oXHJcbiAgICBgU0VMRUNUIHMuc2Vzc2lvbl9pZCxcclxuICAgICAgICAgICAgcy5leHBpcmVzX2F0LFxyXG4gICAgICAgICAgICBzLmxhc3Rfc2Vlbl9hdCxcclxuICAgICAgICAgICAgdS5vcHNfaWQsXHJcbiAgICAgICAgICAgIHUubmFtZSxcclxuICAgICAgICAgICAgdS5yb2xlLFxyXG4gICAgICAgICAgICB1LmVtYWlsLFxyXG4gICAgICAgICAgICB1LmRlcGFydG1lbnRcclxuICAgICBGUk9NIGF1dGhfc2Vzc2lvbnMgc1xyXG4gICAgIEpPSU4gdXNlcnMgdSBPTiB1Lm9wc19pZCA9IHMub3BzX2lkXHJcbiAgICAgV0hFUkUgcy5zZXNzaW9uX2lkID0gJDFcclxuICAgICAgIEFORCBzLmV4cGlyZXNfYXQgPiBOT1coKVxyXG4gICAgIExJTUlUIDFgLFxyXG4gICAgW3Nlc3Npb25JZF1cclxuICApXHJcblxyXG4gIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG5cclxuICBjb25zdCByb3cgPSByZXN1bHQucm93c1swXVxyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcclxuICBjb25zdCBsYXN0U2VlbiA9IHJvdy5sYXN0X3NlZW5fYXQgPyBuZXcgRGF0ZShyb3cubGFzdF9zZWVuX2F0KS5nZXRUaW1lKCkgOiAwXHJcblxyXG4gIGNvbnN0IHJvdXRlID0gZ2V0UmVxdWVzdENvbnRleHQoKT8ucm91dGVcclxuICBjb25zdCBpc0FwaVJlcXVlc3QgPSByb3V0ZSA/IHJvdXRlLnN0YXJ0c1dpdGgoXCIvYXBpL1wiKSA6IGZhbHNlXHJcblxyXG4gIGlmIChpc0FwaVJlcXVlc3QgJiYgKCFsYXN0U2VlbiB8fCBub3cgLSBsYXN0U2VlbiA+IFNFU1NJT05fUkVGUkVTSF9NSU5VVEVTICogNjAgKiAxMDAwKSkge1xyXG4gICAgYXdhaXQgcXVlcnkoXCJVUERBVEUgYXV0aF9zZXNzaW9ucyBTRVQgbGFzdF9zZWVuX2F0ID0gTk9XKCkgV0hFUkUgc2Vzc2lvbl9pZCA9ICQxXCIsIFtyb3cuc2Vzc2lvbl9pZF0pXHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2Vzc2lvbklkOiByb3cuc2Vzc2lvbl9pZCxcclxuICAgIHVzZXI6IHtcclxuICAgICAgb3BzX2lkOiByb3cub3BzX2lkLFxyXG4gICAgICBuYW1lOiByb3cubmFtZSxcclxuICAgICAgcm9sZTogcm93LnJvbGUsXHJcbiAgICAgIGVtYWlsOiByb3cuZW1haWwgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBkZXBhcnRtZW50OiByb3cuZGVwYXJ0bWVudCB8fCB1bmRlZmluZWQsXHJcbiAgICB9LFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFNlc3Npb25Db29raWUocmVzcG9uc2U6IFJlc3BvbnNlLCBzZXNzaW9uSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IG1heEFnZSA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IoU0VTU0lPTl9UVExfSE9VUlMgKiA2MCAqIDYwKSlcclxuICBjb25zdCBvcHRpb25zID0gY29va2llT3B0aW9ucyhtYXhBZ2UpXHJcbiAgY29uc3QgY29va2llSmFyID0gKHJlc3BvbnNlIGFzIGFueSkuY29va2llc1xyXG4gIGlmIChjb29raWVKYXI/LnNldCkge1xyXG4gICAgY29va2llSmFyLnNldChTRVNTSU9OX0NPT0tJRV9OQU1FLCBzZXNzaW9uSWQsIG9wdGlvbnMpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTZXNzaW9uQ29va2llKHJlc3BvbnNlOiBSZXNwb25zZSkge1xyXG4gIGNvbnN0IG9wdGlvbnMgPSBjb29raWVPcHRpb25zKDApXHJcbiAgY29uc3QgY29va2llSmFyID0gKHJlc3BvbnNlIGFzIGFueSkuY29va2llc1xyXG4gIGlmIChjb29raWVKYXI/LnNldCkge1xyXG4gICAgY29va2llSmFyLnNldChTRVNTSU9OX0NPT0tJRV9OQU1FLCBcIlwiLCBvcHRpb25zKVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY29va2llcyIsInF1ZXJ5IiwiZ2V0UmVxdWVzdENvbnRleHQiLCJTRVNTSU9OX0NPT0tJRV9OQU1FIiwiU0VTU0lPTl9UVExfSE9VUlMiLCJOdW1iZXIiLCJwcm9jZXNzIiwiZW52IiwiU0VTU0lPTl9SRUZSRVNIX01JTlVURVMiLCJpc1NlY3VyZUNvb2tpZSIsIkNPT0tJRV9TRUNVUkUiLCJnZXRDb29raWVEb21haW4iLCJkb21haW4iLCJDT09LSUVfRE9NQUlOIiwidW5kZWZpbmVkIiwiY29va2llT3B0aW9ucyIsIm1heEFnZVNlY29uZHMiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwicGF0aCIsIm1heEFnZSIsImdldFNlc3Npb25JZEZyb21Db29raWVzIiwiZ2V0IiwidmFsdWUiLCJjcmVhdGVTZXNzaW9uIiwib3BzSWQiLCJleHBpcmVzQXQiLCJEYXRlIiwibm93IiwicmVzdWx0Iiwic2Vzc2lvbklkIiwicm93cyIsInNlc3Npb25faWQiLCJkZWxldGVTZXNzaW9uIiwiZ2V0U2Vzc2lvbiIsImxlbmd0aCIsInJvdyIsImxhc3RTZWVuIiwibGFzdF9zZWVuX2F0IiwiZ2V0VGltZSIsInJvdXRlIiwiaXNBcGlSZXF1ZXN0Iiwic3RhcnRzV2l0aCIsInVzZXIiLCJvcHNfaWQiLCJuYW1lIiwicm9sZSIsImVtYWlsIiwiZGVwYXJ0bWVudCIsInNldFNlc3Npb25Db29raWUiLCJyZXNwb25zZSIsIk1hdGgiLCJtYXgiLCJmbG9vciIsIm9wdGlvbnMiLCJjb29raWVKYXIiLCJzZXQiLCJjbGVhclNlc3Npb25Db29raWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! server-only */ \"(rsc)/./node_modules/next/dist/compiled/server-only/empty.js\");\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(server_only__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var _lib_request_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/request-context */ \"(rsc)/./src/lib/request-context.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./src/lib/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_1__]);\npg__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst connectionString = process.env.DATABASE_URL;\nif (!connectionString) {\n    throw new Error(\"DATABASE_URL is not set\");\n}\nconst sslEnabled = process.env.DATABASE_SSL === \"true\";\nconst pool = globalThis.__pgPool || new pg__WEBPACK_IMPORTED_MODULE_1__.Pool({\n    connectionString,\n    ssl: sslEnabled ? {\n        rejectUnauthorized: false\n    } : undefined\n});\nconst poolWithConnect = pool;\nif (!globalThis.__pgPool) {\n    globalThis.__pgPool = pool;\n}\nasync function query(text, params) {\n    const start = Date.now();\n    const requestContext = (0,_lib_request_context__WEBPACK_IMPORTED_MODULE_2__.getRequestContext)();\n    const route = requestContext?.route ?? \"unknown\";\n    const requestId = requestContext?.requestId;\n    try {\n        const result = await pool.query(text, params);\n        const rowCount = result.rowCount;\n        const rows = typeof rowCount === \"number\" ? rowCount : result.rows?.length ?? 0;\n        const ms = Date.now() - start;\n        _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info({\n            type: \"db.query\",\n            route,\n            requestId,\n            ms,\n            rows\n        }, \"db.query\");\n        return result;\n    } catch (error) {\n        const ms = Date.now() - start;\n        const message = error instanceof Error ? error.message : String(error);\n        _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error({\n            type: \"db.query.error\",\n            route,\n            requestId,\n            ms,\n            error: message\n        }, \"db.query.error\");\n        throw error;\n    }\n}\nfunction createLoggedClient(client) {\n    return {\n        query: async (text, params)=>{\n            const start = Date.now();\n            const requestContext = (0,_lib_request_context__WEBPACK_IMPORTED_MODULE_2__.getRequestContext)();\n            const route = requestContext?.route ?? \"unknown\";\n            const requestId = requestContext?.requestId;\n            try {\n                const result = await client.query(text, params);\n                const rowCount = result.rowCount;\n                const rows = typeof rowCount === \"number\" ? rowCount : result.rows?.length ?? 0;\n                const ms = Date.now() - start;\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info({\n                    type: \"db.query\",\n                    route,\n                    requestId,\n                    ms,\n                    rows\n                }, \"db.query\");\n                return result;\n            } catch (error) {\n                const ms = Date.now() - start;\n                const message = error instanceof Error ? error.message : String(error);\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error({\n                    type: \"db.query.error\",\n                    route,\n                    requestId,\n                    ms,\n                    error: message\n                }, \"db.query.error\");\n                throw error;\n            }\n        },\n        release: ()=>client.release()\n    };\n}\nasync function withTransaction(fn) {\n    const client = await poolWithConnect.connect();\n    const loggedClient = createLoggedClient(client);\n    try {\n        await loggedClient.query(\"BEGIN\");\n        const result = await fn(loggedClient);\n        await loggedClient.query(\"COMMIT\");\n        return result;\n    } catch (error) {\n        try {\n            await loggedClient.query(\"ROLLBACK\");\n        } catch  {}\n        throw error;\n    } finally{\n        client.release();\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBb0I7QUFDSztBQUNnQztBQUNwQjtBQU9yQyxNQUFNRyxtQkFBbUJDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtBQUVqRCxJQUFJLENBQUNILGtCQUFrQjtJQUNyQixNQUFNLElBQUlJLE1BQU07QUFDbEI7QUFFQSxNQUFNQyxhQUFhSixRQUFRQyxHQUFHLENBQUNJLFlBQVksS0FBSztBQVNoRCxNQUFNQyxPQUNKQyxXQUFXQyxRQUFRLElBQ25CLElBQUlaLG9DQUFJQSxDQUFDO0lBQ1BHO0lBQ0FVLEtBQUtMLGFBQWE7UUFBRU0sb0JBQW9CO0lBQU0sSUFBSUM7QUFDcEQ7QUFFRixNQUFNQyxrQkFBa0JOO0FBRXhCLElBQUksQ0FBQ0MsV0FBV0MsUUFBUSxFQUFFO0lBQ3hCRCxXQUFXQyxRQUFRLEdBQUdGO0FBQ3hCO0FBRU8sZUFBZU8sTUFBZUMsSUFBWSxFQUFFQyxNQUFjO0lBQy9ELE1BQU1DLFFBQVFDLEtBQUtDLEdBQUc7SUFDdEIsTUFBTUMsaUJBQWlCdEIsdUVBQWlCQTtJQUN4QyxNQUFNdUIsUUFBUUQsZ0JBQWdCQyxTQUFTO0lBQ3ZDLE1BQU1DLFlBQVlGLGdCQUFnQkU7SUFFbEMsSUFBSTtRQUNGLE1BQU1DLFNBQVMsTUFBTWhCLEtBQUtPLEtBQUssQ0FBSUMsTUFBTUM7UUFDekMsTUFBTVEsV0FBVyxPQUF5Q0EsUUFBUTtRQUNsRSxNQUFNQyxPQUFPLE9BQU9ELGFBQWEsV0FBV0EsV0FBV0QsT0FBT0UsSUFBSSxFQUFFQyxVQUFVO1FBQzlFLE1BQU1DLEtBQUtULEtBQUtDLEdBQUcsS0FBS0Y7UUFDeEJsQiwrQ0FBTUEsQ0FBQzZCLElBQUksQ0FBQztZQUFFQyxNQUFNO1lBQVlSO1lBQU9DO1lBQVdLO1lBQUlGO1FBQUssR0FBRztRQUM5RCxPQUFPRjtJQUNULEVBQUUsT0FBT08sT0FBTztRQUNkLE1BQU1ILEtBQUtULEtBQUtDLEdBQUcsS0FBS0Y7UUFDeEIsTUFBTWMsVUFBVUQsaUJBQWlCMUIsUUFBUTBCLE1BQU1DLE9BQU8sR0FBR0MsT0FBT0Y7UUFDaEUvQiwrQ0FBTUEsQ0FBQytCLEtBQUssQ0FBQztZQUFFRCxNQUFNO1lBQWtCUjtZQUFPQztZQUFXSztZQUFJRyxPQUFPQztRQUFRLEdBQUc7UUFDL0UsTUFBTUQ7SUFDUjtBQUNGO0FBRUEsU0FBU0csbUJBQW1CQyxNQUFnQjtJQUMxQyxPQUFPO1FBQ0xwQixPQUFPLE9BQU9DLE1BQWNDO1lBQzFCLE1BQU1DLFFBQVFDLEtBQUtDLEdBQUc7WUFDdEIsTUFBTUMsaUJBQWlCdEIsdUVBQWlCQTtZQUN4QyxNQUFNdUIsUUFBUUQsZ0JBQWdCQyxTQUFTO1lBQ3ZDLE1BQU1DLFlBQVlGLGdCQUFnQkU7WUFDbEMsSUFBSTtnQkFDRixNQUFNQyxTQUFTLE1BQU1XLE9BQU9wQixLQUFLLENBQUNDLE1BQU1DO2dCQUN4QyxNQUFNUSxXQUFXLE9BQXlDQSxRQUFRO2dCQUNsRSxNQUFNQyxPQUFPLE9BQU9ELGFBQWEsV0FBV0EsV0FBV0QsT0FBT0UsSUFBSSxFQUFFQyxVQUFVO2dCQUM5RSxNQUFNQyxLQUFLVCxLQUFLQyxHQUFHLEtBQUtGO2dCQUN4QmxCLCtDQUFNQSxDQUFDNkIsSUFBSSxDQUFDO29CQUFFQyxNQUFNO29CQUFZUjtvQkFBT0M7b0JBQVdLO29CQUFJRjtnQkFBSyxHQUFHO2dCQUM5RCxPQUFPRjtZQUNULEVBQUUsT0FBT08sT0FBTztnQkFDZCxNQUFNSCxLQUFLVCxLQUFLQyxHQUFHLEtBQUtGO2dCQUN4QixNQUFNYyxVQUFVRCxpQkFBaUIxQixRQUFRMEIsTUFBTUMsT0FBTyxHQUFHQyxPQUFPRjtnQkFDaEUvQiwrQ0FBTUEsQ0FBQytCLEtBQUssQ0FBQztvQkFBRUQsTUFBTTtvQkFBa0JSO29CQUFPQztvQkFBV0s7b0JBQUlHLE9BQU9DO2dCQUFRLEdBQUc7Z0JBQy9FLE1BQU1EO1lBQ1I7UUFDRjtRQUNBSyxTQUFTLElBQU1ELE9BQU9DLE9BQU87SUFDL0I7QUFDRjtBQUVPLGVBQWVDLGdCQUFtQkMsRUFBb0M7SUFDM0UsTUFBTUgsU0FBUyxNQUFNckIsZ0JBQWdCeUIsT0FBTztJQUM1QyxNQUFNQyxlQUFlTixtQkFBbUJDO0lBRXhDLElBQUk7UUFDRixNQUFNSyxhQUFhekIsS0FBSyxDQUFDO1FBQ3pCLE1BQU1TLFNBQVMsTUFBTWMsR0FBR0U7UUFDeEIsTUFBTUEsYUFBYXpCLEtBQUssQ0FBQztRQUN6QixPQUFPUztJQUNULEVBQUUsT0FBT08sT0FBTztRQUNkLElBQUk7WUFDRixNQUFNUyxhQUFhekIsS0FBSyxDQUFDO1FBQzNCLEVBQUUsT0FBTSxDQUFDO1FBQ1QsTUFBTWdCO0lBQ1IsU0FBVTtRQUNSSSxPQUFPQyxPQUFPO0lBQ2hCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vdXRib3VuZC1pbnRlcm5hbC10b29sLy4vc3JjL2xpYi9kYi50cz85ZTRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcInNlcnZlci1vbmx5XCJcclxuaW1wb3J0IHsgUG9vbCB9IGZyb20gXCJwZ1wiXHJcbmltcG9ydCB7IGdldFJlcXVlc3RDb250ZXh0IH0gZnJvbSBcIkAvbGliL3JlcXVlc3QtY29udGV4dFwiXHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAL2xpYi9sb2dnZXJcIlxyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcclxuICB2YXIgX19wZ1Bvb2w6IFBvb2wgfCB1bmRlZmluZWRcclxufVxyXG5cclxuY29uc3QgY29ubmVjdGlvblN0cmluZyA9IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTFxyXG5cclxuaWYgKCFjb25uZWN0aW9uU3RyaW5nKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKFwiREFUQUJBU0VfVVJMIGlzIG5vdCBzZXRcIilcclxufVxyXG5cclxuY29uc3Qgc3NsRW5hYmxlZCA9IHByb2Nlc3MuZW52LkRBVEFCQVNFX1NTTCA9PT0gXCJ0cnVlXCJcclxuXHJcbnR5cGUgRGJDbGllbnQgPSB7XHJcbiAgcXVlcnk6ICh0ZXh0OiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKSA9PiBQcm9taXNlPHsgcm93czogYW55W107IHJvd0NvdW50PzogbnVtYmVyIHwgbnVsbCB9PlxyXG4gIHJlbGVhc2U6ICgpID0+IHZvaWRcclxufVxyXG5cclxudHlwZSBQb29sV2l0aENvbm5lY3QgPSBQb29sICYgeyBjb25uZWN0OiAoKSA9PiBQcm9taXNlPERiQ2xpZW50PiB9XHJcblxyXG5jb25zdCBwb29sID1cclxuICBnbG9iYWxUaGlzLl9fcGdQb29sIHx8XHJcbiAgbmV3IFBvb2woe1xyXG4gICAgY29ubmVjdGlvblN0cmluZyxcclxuICAgIHNzbDogc3NsRW5hYmxlZCA/IHsgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSB9IDogdW5kZWZpbmVkLFxyXG4gIH0pXHJcblxyXG5jb25zdCBwb29sV2l0aENvbm5lY3QgPSBwb29sIGFzIFBvb2xXaXRoQ29ubmVjdFxyXG5cclxuaWYgKCFnbG9iYWxUaGlzLl9fcGdQb29sKSB7XHJcbiAgZ2xvYmFsVGhpcy5fX3BnUG9vbCA9IHBvb2xcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQgPSBhbnk+KHRleHQ6IHN0cmluZywgcGFyYW1zPzogYW55W10pIHtcclxuICBjb25zdCBzdGFydCA9IERhdGUubm93KClcclxuICBjb25zdCByZXF1ZXN0Q29udGV4dCA9IGdldFJlcXVlc3RDb250ZXh0KClcclxuICBjb25zdCByb3V0ZSA9IHJlcXVlc3RDb250ZXh0Py5yb3V0ZSA/PyBcInVua25vd25cIlxyXG4gIGNvbnN0IHJlcXVlc3RJZCA9IHJlcXVlc3RDb250ZXh0Py5yZXF1ZXN0SWRcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnk8VD4odGV4dCwgcGFyYW1zKVxyXG4gICAgY29uc3Qgcm93Q291bnQgPSAocmVzdWx0IGFzIHsgcm93Q291bnQ/OiBudW1iZXIgfCBudWxsIH0pLnJvd0NvdW50XHJcbiAgICBjb25zdCByb3dzID0gdHlwZW9mIHJvd0NvdW50ID09PSBcIm51bWJlclwiID8gcm93Q291bnQgOiByZXN1bHQucm93cz8ubGVuZ3RoID8/IDBcclxuICAgIGNvbnN0IG1zID0gRGF0ZS5ub3coKSAtIHN0YXJ0XHJcbiAgICBsb2dnZXIuaW5mbyh7IHR5cGU6IFwiZGIucXVlcnlcIiwgcm91dGUsIHJlcXVlc3RJZCwgbXMsIHJvd3MgfSwgXCJkYi5xdWVyeVwiKVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zdCBtcyA9IERhdGUubm93KCkgLSBzdGFydFxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxyXG4gICAgbG9nZ2VyLmVycm9yKHsgdHlwZTogXCJkYi5xdWVyeS5lcnJvclwiLCByb3V0ZSwgcmVxdWVzdElkLCBtcywgZXJyb3I6IG1lc3NhZ2UgfSwgXCJkYi5xdWVyeS5lcnJvclwiKVxyXG4gICAgdGhyb3cgZXJyb3JcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxvZ2dlZENsaWVudChjbGllbnQ6IERiQ2xpZW50KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHF1ZXJ5OiBhc3luYyAodGV4dDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSkgPT4ge1xyXG4gICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KClcclxuICAgICAgY29uc3QgcmVxdWVzdENvbnRleHQgPSBnZXRSZXF1ZXN0Q29udGV4dCgpXHJcbiAgICAgIGNvbnN0IHJvdXRlID0gcmVxdWVzdENvbnRleHQ/LnJvdXRlID8/IFwidW5rbm93blwiXHJcbiAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IHJlcXVlc3RDb250ZXh0Py5yZXF1ZXN0SWRcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkodGV4dCwgcGFyYW1zKVxyXG4gICAgICAgIGNvbnN0IHJvd0NvdW50ID0gKHJlc3VsdCBhcyB7IHJvd0NvdW50PzogbnVtYmVyIHwgbnVsbCB9KS5yb3dDb3VudFxyXG4gICAgICAgIGNvbnN0IHJvd3MgPSB0eXBlb2Ygcm93Q291bnQgPT09IFwibnVtYmVyXCIgPyByb3dDb3VudCA6IHJlc3VsdC5yb3dzPy5sZW5ndGggPz8gMFxyXG4gICAgICAgIGNvbnN0IG1zID0gRGF0ZS5ub3coKSAtIHN0YXJ0XHJcbiAgICAgICAgbG9nZ2VyLmluZm8oeyB0eXBlOiBcImRiLnF1ZXJ5XCIsIHJvdXRlLCByZXF1ZXN0SWQsIG1zLCByb3dzIH0sIFwiZGIucXVlcnlcIilcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgbXMgPSBEYXRlLm5vdygpIC0gc3RhcnRcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKHsgdHlwZTogXCJkYi5xdWVyeS5lcnJvclwiLCByb3V0ZSwgcmVxdWVzdElkLCBtcywgZXJyb3I6IG1lc3NhZ2UgfSwgXCJkYi5xdWVyeS5lcnJvclwiKVxyXG4gICAgICAgIHRocm93IGVycm9yXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZWxlYXNlOiAoKSA9PiBjbGllbnQucmVsZWFzZSgpLFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihmbjogKGNsaWVudDogRGJDbGllbnQpID0+IFByb21pc2U8VD4pIHtcclxuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sV2l0aENvbm5lY3QuY29ubmVjdCgpXHJcbiAgY29uc3QgbG9nZ2VkQ2xpZW50ID0gY3JlYXRlTG9nZ2VkQ2xpZW50KGNsaWVudClcclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGxvZ2dlZENsaWVudC5xdWVyeShcIkJFR0lOXCIpXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbihsb2dnZWRDbGllbnQpXHJcbiAgICBhd2FpdCBsb2dnZWRDbGllbnQucXVlcnkoXCJDT01NSVRcIilcclxuICAgIHJldHVybiByZXN1bHRcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgbG9nZ2VkQ2xpZW50LnF1ZXJ5KFwiUk9MTEJBQ0tcIilcclxuICAgIH0gY2F0Y2gge31cclxuICAgIHRocm93IGVycm9yXHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsaWVudC5yZWxlYXNlKClcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBvb2wiLCJnZXRSZXF1ZXN0Q29udGV4dCIsImxvZ2dlciIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIiwiRXJyb3IiLCJzc2xFbmFibGVkIiwiREFUQUJBU0VfU1NMIiwicG9vbCIsImdsb2JhbFRoaXMiLCJfX3BnUG9vbCIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsInVuZGVmaW5lZCIsInBvb2xXaXRoQ29ubmVjdCIsInF1ZXJ5IiwidGV4dCIsInBhcmFtcyIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsInJlcXVlc3RDb250ZXh0Iiwicm91dGUiLCJyZXF1ZXN0SWQiLCJyZXN1bHQiLCJyb3dDb3VudCIsInJvd3MiLCJsZW5ndGgiLCJtcyIsImluZm8iLCJ0eXBlIiwiZXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwiY3JlYXRlTG9nZ2VkQ2xpZW50IiwiY2xpZW50IiwicmVsZWFzZSIsIndpdGhUcmFuc2FjdGlvbiIsImZuIiwiY29ubmVjdCIsImxvZ2dlZENsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/logger.ts":
/*!***************************!*\
  !*** ./src/lib/logger.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pino */ \"(rsc)/./node_modules/pino/pino.js\");\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_0__);\n\nconst level = process.env.LOG_LEVEL || \"info\";\nconst logger = pino__WEBPACK_IMPORTED_MODULE_0___default()({\n    level,\n    base: {\n        service: \"Outbound Internal Tool\" || 0\n    },\n    timestamp: (pino__WEBPACK_IMPORTED_MODULE_0___default().stdTimeFunctions).isoTime\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2xvZ2dlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUI7QUFFdkIsTUFBTUMsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxTQUFTLElBQUk7QUFFaEMsTUFBTUMsU0FBU0wsMkNBQUlBLENBQUM7SUFDekJDO0lBQ0FLLE1BQU07UUFDSkMsU0FBU0wsd0JBQWdDLElBQUksQ0FBZTtJQUM5RDtJQUNBTyxXQUFXVCw4REFBcUIsQ0FBQ1csT0FBTztBQUMxQyxHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3V0Ym91bmQtaW50ZXJuYWwtdG9vbC8uL3NyYy9saWIvbG9nZ2VyLnRzP2I0OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBpbm8gZnJvbSBcInBpbm9cIlxyXG5cclxuY29uc3QgbGV2ZWwgPSBwcm9jZXNzLmVudi5MT0dfTEVWRUwgfHwgXCJpbmZvXCJcclxuXHJcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBwaW5vKHtcclxuICBsZXZlbCxcclxuICBiYXNlOiB7XHJcbiAgICBzZXJ2aWNlOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfTkFNRSB8fCBcInNvYzUtb3V0Ym91bmRcIixcclxuICB9LFxyXG4gIHRpbWVzdGFtcDogcGluby5zdGRUaW1lRnVuY3Rpb25zLmlzb1RpbWUsXHJcbn0pXHJcbiJdLCJuYW1lcyI6WyJwaW5vIiwibGV2ZWwiLCJwcm9jZXNzIiwiZW52IiwiTE9HX0xFVkVMIiwibG9nZ2VyIiwiYmFzZSIsInNlcnZpY2UiLCJORVhUX1BVQkxJQ19BUFBfTkFNRSIsInRpbWVzdGFtcCIsInN0ZFRpbWVGdW5jdGlvbnMiLCJpc29UaW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/monitoring.ts":
/*!*******************************!*\
  !*** ./src/lib/monitoring.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   captureException: () => (/* binding */ captureException)\n/* harmony export */ });\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/nextjs */ \"(rsc)/./node_modules/@sentry/core/esm/exports.js\");\n\nconst sentryEnabled = Boolean(process.env.SENTRY_DSN || \"\");\nfunction captureException(error, context) {\n    if (!sentryEnabled) return;\n    _sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__.withScope((scope)=>{\n        if (context?.requestId) scope.setTag(\"request_id\", context.requestId);\n        if (context?.route) scope.setTag(\"route\", context.route);\n        if (context?.method) scope.setTag(\"method\", context.method);\n        _sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__.captureException(error);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbml0b3JpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFFeEMsTUFBTUMsZ0JBQWdCQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLFVBQVUsSUFBSUYsRUFBa0M7QUFFbkYsU0FBU0ksaUJBQWlCQyxLQUFjLEVBQUVDLE9BQWlFO0lBQ2hILElBQUksQ0FBQ1IsZUFBZTtJQUNwQkQscURBQWdCLENBQUMsQ0FBQ1c7UUFDaEIsSUFBSUYsU0FBU0csV0FBV0QsTUFBTUUsTUFBTSxDQUFDLGNBQWNKLFFBQVFHLFNBQVM7UUFDcEUsSUFBSUgsU0FBU0ssT0FBT0gsTUFBTUUsTUFBTSxDQUFDLFNBQVNKLFFBQVFLLEtBQUs7UUFDdkQsSUFBSUwsU0FBU00sUUFBUUosTUFBTUUsTUFBTSxDQUFDLFVBQVVKLFFBQVFNLE1BQU07UUFDMURmLDREQUF1QixDQUFDUTtJQUMxQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3V0Ym91bmQtaW50ZXJuYWwtdG9vbC8uL3NyYy9saWIvbW9uaXRvcmluZy50cz83NmRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFNlbnRyeSBmcm9tIFwiQHNlbnRyeS9uZXh0anNcIlxyXG5cclxuY29uc3Qgc2VudHJ5RW5hYmxlZCA9IEJvb2xlYW4ocHJvY2Vzcy5lbnYuU0VOVFJZX0RTTiB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TRU5UUllfRFNOKVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhcHR1cmVFeGNlcHRpb24oZXJyb3I6IHVua25vd24sIGNvbnRleHQ/OiB7IHJlcXVlc3RJZD86IHN0cmluZzsgcm91dGU/OiBzdHJpbmc7IG1ldGhvZD86IHN0cmluZyB9KSB7XHJcbiAgaWYgKCFzZW50cnlFbmFibGVkKSByZXR1cm5cclxuICBTZW50cnkud2l0aFNjb3BlKChzY29wZSkgPT4ge1xyXG4gICAgaWYgKGNvbnRleHQ/LnJlcXVlc3RJZCkgc2NvcGUuc2V0VGFnKFwicmVxdWVzdF9pZFwiLCBjb250ZXh0LnJlcXVlc3RJZClcclxuICAgIGlmIChjb250ZXh0Py5yb3V0ZSkgc2NvcGUuc2V0VGFnKFwicm91dGVcIiwgY29udGV4dC5yb3V0ZSlcclxuICAgIGlmIChjb250ZXh0Py5tZXRob2QpIHNjb3BlLnNldFRhZyhcIm1ldGhvZFwiLCBjb250ZXh0Lm1ldGhvZClcclxuICAgIFNlbnRyeS5jYXB0dXJlRXhjZXB0aW9uKGVycm9yKVxyXG4gIH0pXHJcbn1cclxuIl0sIm5hbWVzIjpbIlNlbnRyeSIsInNlbnRyeUVuYWJsZWQiLCJCb29sZWFuIiwicHJvY2VzcyIsImVudiIsIlNFTlRSWV9EU04iLCJORVhUX1BVQkxJQ19TRU5UUllfRFNOIiwiY2FwdHVyZUV4Y2VwdGlvbiIsImVycm9yIiwiY29udGV4dCIsIndpdGhTY29wZSIsInNjb3BlIiwicmVxdWVzdElkIiwic2V0VGFnIiwicm91dGUiLCJtZXRob2QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/monitoring.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/request-context.ts":
/*!************************************!*\
  !*** ./src/lib/request-context.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRequestContext: () => (/* binding */ getRequestContext),\n/* harmony export */   withRequestLogging: () => (/* binding */ withRequestLogging)\n/* harmony export */ });\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! server-only */ \"(rsc)/./node_modules/next/dist/compiled/server-only/empty.js\");\n/* harmony import */ var server_only__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(server_only__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_async_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:async_hooks */ \"node:async_hooks\");\n/* harmony import */ var node_async_hooks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_async_hooks__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./src/lib/logger.ts\");\n/* harmony import */ var _lib_monitoring__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/monitoring */ \"(rsc)/./src/lib/monitoring.ts\");\n\n\n\n\n\n\nconst requestContext = new node_async_hooks__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorage();\nfunction getRequestContext() {\n    return requestContext.getStore();\n}\nfunction withRequestLogging(route, handler) {\n    return async function wrapped(request, context) {\n        const start = Date.now();\n        const method = request.method;\n        const requestId = request.headers.get(\"x-request-id\") || (0,node_crypto__WEBPACK_IMPORTED_MODULE_2__.randomUUID)();\n        return requestContext.run({\n            route,\n            requestId\n        }, async ()=>{\n            let status = 500;\n            try {\n                const response = await handler(request, context);\n                status = response.status;\n                response.headers.set(\"x-request-id\", requestId);\n                return response;\n            } catch (error) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_4__.logger.error({\n                    err: error,\n                    route,\n                    method,\n                    requestId\n                }, \"api.error\");\n                (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_5__.captureException)(error, {\n                    route,\n                    method,\n                    requestId\n                });\n                const response = next_server__WEBPACK_IMPORTED_MODULE_3__.NextResponse.json({\n                    error: \"Internal server error\",\n                    request_id: requestId\n                }, {\n                    status: 500\n                });\n                response.headers.set(\"x-request-id\", requestId);\n                status = 500;\n                return response;\n            } finally{\n                const ms = Date.now() - start;\n                _lib_logger__WEBPACK_IMPORTED_MODULE_4__.logger.info({\n                    type: \"api.request\",\n                    route,\n                    method,\n                    status,\n                    ms,\n                    requestId\n                }, \"api.request\");\n            }\n        });\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JlcXVlc3QtY29udGV4dC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFvQjtBQUNnQztBQUNaO0FBQ0U7QUFDTDtBQUNjO0FBT25ELE1BQU1LLGlCQUFpQixJQUFJTCwrREFBaUJBO0FBRXJDLFNBQVNNO0lBQ2QsT0FBT0QsZUFBZUUsUUFBUTtBQUNoQztBQVNPLFNBQVNDLG1CQUNkQyxLQUFhLEVBQ2JDLE9BQStCO0lBRS9CLE9BQU8sZUFBZUMsUUFBUUMsT0FBZ0IsRUFBRUMsT0FBa0I7UUFDaEUsTUFBTUMsUUFBUUMsS0FBS0MsR0FBRztRQUN0QixNQUFNQyxTQUFTTCxRQUFRSyxNQUFNO1FBQzdCLE1BQU1DLFlBQVlOLFFBQVFPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQm5CLHVEQUFVQTtRQUVuRSxPQUFPSSxlQUFlZ0IsR0FBRyxDQUFDO1lBQUVaO1lBQU9TO1FBQVUsR0FBRztZQUM5QyxJQUFJSSxTQUFTO1lBQ2IsSUFBSTtnQkFDRixNQUFNQyxXQUFXLE1BQU1iLFFBQVFFLFNBQVNDO2dCQUN4Q1MsU0FBU0MsU0FBU0QsTUFBTTtnQkFDeEJDLFNBQVNKLE9BQU8sQ0FBQ0ssR0FBRyxDQUFDLGdCQUFnQk47Z0JBQ3JDLE9BQU9LO1lBQ1QsRUFBRSxPQUFPRSxPQUFPO2dCQUNkdEIsK0NBQU1BLENBQUNzQixLQUFLLENBQUM7b0JBQUVDLEtBQUtEO29CQUFPaEI7b0JBQU9RO29CQUFRQztnQkFBVSxHQUFHO2dCQUN2RGQsaUVBQWdCQSxDQUFDcUIsT0FBTztvQkFBRWhCO29CQUFPUTtvQkFBUUM7Z0JBQVU7Z0JBQ25ELE1BQU1LLFdBQVdyQixxREFBWUEsQ0FBQ3lCLElBQUksQ0FDaEM7b0JBQUVGLE9BQU87b0JBQXlCRyxZQUFZVjtnQkFBVSxHQUN4RDtvQkFBRUksUUFBUTtnQkFBSTtnQkFFaEJDLFNBQVNKLE9BQU8sQ0FBQ0ssR0FBRyxDQUFDLGdCQUFnQk47Z0JBQ3JDSSxTQUFTO2dCQUNULE9BQU9DO1lBQ1QsU0FBVTtnQkFDUixNQUFNTSxLQUFLZCxLQUFLQyxHQUFHLEtBQUtGO2dCQUN4QlgsK0NBQU1BLENBQUMyQixJQUFJLENBQUM7b0JBQUVDLE1BQU07b0JBQWV0QjtvQkFBT1E7b0JBQVFLO29CQUFRTztvQkFBSVg7Z0JBQVUsR0FBRztZQUM3RTtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL291dGJvdW5kLWludGVybmFsLXRvb2wvLi9zcmMvbGliL3JlcXVlc3QtY29udGV4dC50cz8yOGIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcInNlcnZlci1vbmx5XCJcclxuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tIFwibm9kZTphc3luY19ob29rc1wiXHJcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tIFwibm9kZTpjcnlwdG9cIlxyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiQC9saWIvbG9nZ2VyXCJcclxuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gXCJAL2xpYi9tb25pdG9yaW5nXCJcclxuXHJcbnR5cGUgUmVxdWVzdENvbnRleHQgPSB7XHJcbiAgcm91dGU6IHN0cmluZ1xyXG4gIHJlcXVlc3RJZDogc3RyaW5nXHJcbn1cclxuXHJcbmNvbnN0IHJlcXVlc3RDb250ZXh0ID0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlPFJlcXVlc3RDb250ZXh0PigpXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVxdWVzdENvbnRleHQoKSB7XHJcbiAgcmV0dXJuIHJlcXVlc3RDb250ZXh0LmdldFN0b3JlKClcclxufVxyXG5cclxudHlwZSBSb3V0ZUhhbmRsZXI8VENvbnRleHQ+ID0gKHJlcXVlc3Q6IFJlcXVlc3QsIGNvbnRleHQ6IFRDb250ZXh0KSA9PiBQcm9taXNlPFJlc3BvbnNlPiB8IFJlc3BvbnNlXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2l0aFJlcXVlc3RMb2dnaW5nKHJvdXRlOiBzdHJpbmcsIGhhbmRsZXI6IFJvdXRlSGFuZGxlcjx2b2lkPik6IChyZXF1ZXN0OiBSZXF1ZXN0KSA9PiBQcm9taXNlPFJlc3BvbnNlPlxyXG5leHBvcnQgZnVuY3Rpb24gd2l0aFJlcXVlc3RMb2dnaW5nPFRDb250ZXh0PihcclxuICByb3V0ZTogc3RyaW5nLFxyXG4gIGhhbmRsZXI6IFJvdXRlSGFuZGxlcjxUQ29udGV4dD5cclxuKTogKHJlcXVlc3Q6IFJlcXVlc3QsIGNvbnRleHQ6IFRDb250ZXh0KSA9PiBQcm9taXNlPFJlc3BvbnNlPlxyXG5leHBvcnQgZnVuY3Rpb24gd2l0aFJlcXVlc3RMb2dnaW5nPFRDb250ZXh0PihcclxuICByb3V0ZTogc3RyaW5nLFxyXG4gIGhhbmRsZXI6IFJvdXRlSGFuZGxlcjxUQ29udGV4dD5cclxuKTogKHJlcXVlc3Q6IFJlcXVlc3QsIGNvbnRleHQ/OiBUQ29udGV4dCkgPT4gUHJvbWlzZTxSZXNwb25zZT4ge1xyXG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiB3cmFwcGVkKHJlcXVlc3Q6IFJlcXVlc3QsIGNvbnRleHQ/OiBUQ29udGV4dCkge1xyXG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpXHJcbiAgICBjb25zdCBtZXRob2QgPSByZXF1ZXN0Lm1ldGhvZFxyXG4gICAgY29uc3QgcmVxdWVzdElkID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIngtcmVxdWVzdC1pZFwiKSB8fCByYW5kb21VVUlEKClcclxuXHJcbiAgICByZXR1cm4gcmVxdWVzdENvbnRleHQucnVuKHsgcm91dGUsIHJlcXVlc3RJZCB9LCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGxldCBzdGF0dXMgPSA1MDBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIocmVxdWVzdCwgY29udGV4dCBhcyBUQ29udGV4dClcclxuICAgICAgICBzdGF0dXMgPSByZXNwb25zZS5zdGF0dXNcclxuICAgICAgICByZXNwb25zZS5oZWFkZXJzLnNldChcIngtcmVxdWVzdC1pZFwiLCByZXF1ZXN0SWQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKHsgZXJyOiBlcnJvciwgcm91dGUsIG1ldGhvZCwgcmVxdWVzdElkIH0sIFwiYXBpLmVycm9yXCIpXHJcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihlcnJvciwgeyByb3V0ZSwgbWV0aG9kLCByZXF1ZXN0SWQgfSlcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgcmVxdWVzdF9pZDogcmVxdWVzdElkIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApXHJcbiAgICAgICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoXCJ4LXJlcXVlc3QtaWRcIiwgcmVxdWVzdElkKVxyXG4gICAgICAgIHN0YXR1cyA9IDUwMFxyXG4gICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIGNvbnN0IG1zID0gRGF0ZS5ub3coKSAtIHN0YXJ0XHJcbiAgICAgICAgbG9nZ2VyLmluZm8oeyB0eXBlOiBcImFwaS5yZXF1ZXN0XCIsIHJvdXRlLCBtZXRob2QsIHN0YXR1cywgbXMsIHJlcXVlc3RJZCB9LCBcImFwaS5yZXF1ZXN0XCIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJBc3luY0xvY2FsU3RvcmFnZSIsInJhbmRvbVVVSUQiLCJOZXh0UmVzcG9uc2UiLCJsb2dnZXIiLCJjYXB0dXJlRXhjZXB0aW9uIiwicmVxdWVzdENvbnRleHQiLCJnZXRSZXF1ZXN0Q29udGV4dCIsImdldFN0b3JlIiwid2l0aFJlcXVlc3RMb2dnaW5nIiwicm91dGUiLCJoYW5kbGVyIiwid3JhcHBlZCIsInJlcXVlc3QiLCJjb250ZXh0Iiwic3RhcnQiLCJEYXRlIiwibm93IiwibWV0aG9kIiwicmVxdWVzdElkIiwiaGVhZGVycyIsImdldCIsInJ1biIsInN0YXR1cyIsInJlc3BvbnNlIiwic2V0IiwiZXJyb3IiLCJlcnIiLCJqc29uIiwicmVxdWVzdF9pZCIsIm1zIiwiaW5mbyIsInR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/request-context.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@sentry","vendor-chunks/pino","vendor-chunks/pino-std-serializers","vendor-chunks/thread-stream","vendor-chunks/sonic-boom","vendor-chunks/safe-stable-stringify","vendor-chunks/quick-format-unescaped","vendor-chunks/on-exit-leak-free","vendor-chunks/atomic-sleep","vendor-chunks/@pinojs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cspxph4227%5CDesktop%5Csoc5-centralized-data-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();