"use strict";(()=>{var e={};e.id=4020,e.ids=[4020],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},36253:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>u,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var n=r(49303),o=r(88716),i=r(60670),s=r(55188),p=e([s]);s=(p.then?(await p)():p)[0];let l=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/kpi/intraday/route",pathname:"/api/kpi/intraday",filename:"route",bundlePath:"app/api/kpi/intraday/route"},resolvedPagePath:"C:\\Users\\phlspxuser\\Documents\\Mrkcde\\Ongoing\\soc5-internalTool\\src\\app\\api\\kpi\\intraday\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:h}=l,g="/api/kpi/intraday/route";function u(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}a()}catch(e){a(e)}})},55188:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{GET:()=>s});var n=r(87070),o=r(75748),i=e([o]);async function s(e){let{searchParams:t}=new URL(e.url),r=t.get("date"),a=[],i=[];r&&(i.push(r),a.push(`date = $${i.length}`));let s=a.length?`WHERE ${a.join(" AND ")}`:"",p=await (0,o.I)(`SELECT *
     FROM kpi_intraday
     ${s}
     ORDER BY timestamp DESC`,i);return n.NextResponse.json(p.rows)}o=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})},75748:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{I:()=>i});var n=r(8678),o=e([n]);n=(o.then?(await o)():o)[0];let s=process.env.DATABASE_URL;if(!s)throw Error("DATABASE_URL is not set");let p="true"===process.env.DATABASE_SSL,u=globalThis.__pgPool||new n.Pool({connectionString:s,ssl:p?{rejectUnauthorized:!1}:void 0});async function i(e,t){return u.query(e,t)}globalThis.__pgPool||(globalThis.__pgPool=u),a()}catch(e){a(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972],()=>r(36253));module.exports=a})();