(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{3570:function(e,t,r){Promise.resolve().then(r.bind(r,9214))},2135:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},9174:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var s=r(7437);r(2265);var a=r(535),i=r(3448);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)(l({variant:r}),t),...a})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var s=r(7437),a=r(2265),i=r(7053),l=r(535),o=r(3448);let n=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(n({variant:a,size:l,className:r})),ref:t,...c})});d.displayName="Button"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var s=r(7437),a=r(2265),i=r(3448);let l=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},8752:function(e,t,r){"use strict";r.d(t,{pm:function(){return x}});var s=r(2265);let a=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],d={toasts:[]};function c(e){d=o(d,e),n.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function x(){let[e,t]=s.useState(d);return s.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4881:function(e,t,r){"use strict";r.d(t,{H:function(){return n},a:function(){return d}});var s=r(7437),a=r(2265),i=r(1837);let l=(0,a.createContext)(void 0),o="auth_last_active";function n(e){let{children:t}=e,[r,n]=(0,a.useState)({user:null,isReady:!1}),d=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=!1;return(async()=>{var t,r;let s=await i.iJ.getSession();if(e)return;let a=null!==(r=null===(t=s.data)||void 0===t?void 0:t.user)&&void 0!==r?r:null;if(a){let e=Date.now();localStorage.setItem(o,String(e)),d.current=e}n({user:a,isReady:!0})})().catch(()=>{e||n({user:null,isReady:!0})}),()=>{e=!0}},[]);let c=(0,a.useCallback)(e=>{let t=Date.now();localStorage.setItem(o,String(t)),d.current=t,n({user:e,isReady:!0})},[]),u=(0,a.useCallback)(()=>{i.iJ.logout().catch(()=>void 0),localStorage.removeItem(o),d.current=0,n(e=>({user:null,isReady:e.isReady}))},[]),x=(0,a.useCallback)(e=>{n(t=>{if(!t.user)return t;let r={...t.user,...e};return{...t,user:r}})},[]);return(0,a.useEffect)(()=>{if(!r.user)return;let e=()=>{let e=Date.now();e-d.current<3e4||(d.current=e,localStorage.setItem(o,String(e)))},t=["mousemove","mousedown","keydown","scroll","touchstart"];t.forEach(t=>window.addEventListener(t,e,{passive:!0}));let s=window.setInterval(()=>{let e=localStorage.getItem(o),t=e?Number(e):0;t&&Date.now()-t>36e5&&u()},6e4);return()=>{t.forEach(t=>window.removeEventListener(t,e)),window.clearInterval(s)}},[r.user,u]),(0,s.jsx)(l.Provider,{value:{user:r.user,login:c,logout:u,updateUser:x,isAuthenticated:!!r.user,isReady:r.isReady},children:t})}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1837:function(e,t,r){"use strict";r.d(t,{gL:function(){return o},i$:function(){return n},iJ:function(){return l}});let s={"Content-Type":"application/json"};async function a(e,t){try{let r=await fetch(e,{...t,credentials:"include",headers:{...s,...(null==t?void 0:t.headers)||{}}}),a=await r.json().catch(()=>null);if(!r.ok)return{error:(null==a?void 0:a.error)||r.statusText,status:r.status,details:a};return{data:a}}catch(e){return{error:e instanceof Error?e.message:"Request failed"}}}function i(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,s]=e;void 0!==s&&""!==s&&t.append(r,String(s))});let r=t.toString();return r?"?".concat(r):""}let l={login:async(e,t)=>a("/api/auth/login",{method:"POST",body:JSON.stringify({ops_id:e,password:t})}),createSeatalkSession:async e=>a("/api/auth/seatalk/session",{method:"POST",body:JSON.stringify({session_id:e})}),seatalkLogin:async e=>a("/api/auth/seatalk/login",{method:"POST",body:JSON.stringify({session_id:e})}),checkSeatalkAuth:async e=>a("/api/auth/seatalk/check".concat(i({session_id:e})),{method:"GET"}),googleLogin:async e=>a("/api/auth/google",{method:"POST",body:JSON.stringify({id_token:e})}),getSession:async()=>a("/api/auth/me",{method:"GET"}),logout:async()=>a("/api/auth/logout",{method:"POST"}),changePassword:async(e,t,r)=>a("/api/auth/change-password",{method:"POST",body:JSON.stringify({ops_id:e,old_password:t,new_password:r})}),getUserById:async e=>a("/api/users/".concat(encodeURIComponent(e)),{method:"GET"}),getUser:async e=>a("/api/users/ops/".concat(encodeURIComponent(e)),{method:"GET"})},o={getUser:async e=>a("/api/users/ops/".concat(encodeURIComponent(e)),{method:"GET"}),getClusters:async(e,t)=>a("/api/lookup/clusters".concat(i({region:e,query:t})),{method:"GET"}),getHubs:async e=>a("/api/lookup/hubs".concat(i({cluster:e})),{method:"GET"}),getProcessors:async e=>a("/api/lookup/processors".concat(i({query:e})),{method:"GET"}),getLhTrip:async e=>a("/api/lookup/lh-trip".concat(i({lhTrip:e})),{method:"GET"})},n={submitRows:async(e,t)=>a("/api/dispatch/submit",{method:"POST",body:JSON.stringify({rows:e,submitted_by_ops_id:t})}),getDispatches:async e=>a("/api/dispatch".concat(i(e)),{method:"GET"}),verifyRows:async e=>a("/api/dispatch/verify",{method:"POST",body:JSON.stringify(e)})}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return i},o:function(){return l}});var s=r(1994),a=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}function l(e){return e?new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}},9214:function(e,t,r){"use strict";r.d(t,{DispatchReportPage:function(){return $}});var s=r(7437),a=r(2265),i=r(9376),l=r(8239),o=r(8881),n=r(3576),d=r(1534),c=r(4252),u=r(3537),x=r(5750);function h(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class f extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,u.R)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p(e){let{children:t,isPresent:r,anchorX:i,root:l}=e,o=(0,a.useId)(),n=(0,a.useRef)(null),d=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,a.useContext)(x._),u=function(...e){return a.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=h(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():h(e[t],null)}}}}(...e),e)}(n,null==t?void 0:t.ref);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:a,right:u}=d.current;if(r||!n.current||!e||!t)return;n.current.dataset.motionPopId=o;let x=document.createElement("style");c&&(x.nonce=c);let h=null!=l?l:document.head;return h.appendChild(x),x.sheet&&x.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===i?"left: ".concat(a):"right: ".concat(u),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{h.contains(x)&&h.removeChild(x)}},[r]),(0,s.jsx)(f,{isPresent:r,childRef:n,sizeRef:d,children:a.cloneElement(t,{ref:u})})}let m=e=>{let{children:t,initial:r,isPresent:i,onExitComplete:l,custom:o,presenceAffectsLayout:d,mode:u,anchorX:x,root:h}=e,f=(0,n.h)(g),m=(0,a.useId)(),b=!0,y=(0,a.useMemo)(()=>(b=!1,{id:m,initial:r,isPresent:i,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;l&&l()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[i,f,l]);return d&&b&&(y={...y}),(0,a.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[i]),a.useEffect(()=>{i||f.size||!l||l()},[i]),"popLayout"===u&&(t=(0,s.jsx)(p,{isPresent:i,anchorX:x,root:h,children:t})),(0,s.jsx)(c.O.Provider,{value:y,children:t})};function g(){return new Map}var b=r(9637);let y=e=>e.key||"";function w(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let j=e=>{let{children:t,custom:r,initial:i=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:u="sync",propagate:x=!1,anchorX:h="left",root:f}=e,[p,g]=(0,b.oO)(x),j=(0,a.useMemo)(()=>w(t),[t]),v=x&&!p?[]:j.map(y),N=(0,a.useRef)(!0),k=(0,a.useRef)(j),C=(0,n.h)(()=>new Map),[S,E]=(0,a.useState)(j),[A,D]=(0,a.useState)(j);(0,d.L)(()=>{N.current=!1,k.current=j;for(let e=0;e<A.length;e++){let t=y(A[e]);v.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[A,v.length,v.join("-")]);let F=[];if(j!==S){let e=[...j];for(let t=0;t<A.length;t++){let r=A[t],s=y(r);v.includes(s)||(e.splice(t,0,r),F.push(r))}return"wait"===u&&F.length&&(e=F),D(w(e)),E(j),null}let{forceRender:T}=(0,a.useContext)(o.p);return(0,s.jsx)(s.Fragment,{children:A.map(e=>{let t=y(e),a=(!x||!!p)&&(j===A||v.includes(t));return(0,s.jsx)(m,{isPresent:a,initial:(!N.current||!!i)&&void 0,custom:r,presenceAffectsLayout:c,mode:u,root:f,onExitComplete:a?void 0:()=>{if(!C.has(t))return;C.set(t,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(null==T||T(),D(k.current),x&&(null==g||g()),l&&l())},anchorX:h,children:e},t)})})};var v=r(4794),N=r(525),k=r(1239),C=r(1047),S=r(9397),E=r(9763);let A=(0,E.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var D=r(3774),F=r(2135),T=r(875),I=r(2369),_=r(8930);let L=(0,E.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var R=r(2381),O=r(279),W=r(9174),P=r(4881),B=r(8752),z=r(1837);let M="soc5_dispatch_reports",H="soc5_dispatch_report_session",G=Number("10000")||1e4;function Z(e,t){let r={rows:t,last_saved_at:new Date().toISOString()};window.localStorage.setItem(e,JSON.stringify(r))}function X(e){if(!e)return"";let t=new Date(e);if(Number.isNaN(t.getTime()))return"";let r=6e4*t.getTimezoneOffset();return new Date(t.getTime()-r).toISOString().slice(0,16)}let U=()=>"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:U(),batchNumber:0,clusterName:"",station:"",region:"",countTO:"",totalOIDLoaded:0,actualDockedTime:"",dockNumber:"",actualDepartTime:"",processorName:"",lHTripNumber:"",plateNumber:"",fleetSize:"4WH",assignedPIC:"",dockConfirmed:!1,loadPercentage:0,...e}},V=["4WH","6W","6WF","10WH","CV"],Y=e=>{let t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.padding="8px 12px",t.style.background="#FFF7ED",t.style.border="1px solid #FDBA74",t.style.borderRadius="12px",t.style.boxShadow="0 12px 24px rgba(15, 23, 42, 0.15)",t.style.display="inline-flex",t.style.alignItems="center",t.style.gap="8px",t.style.color="#7C2D12",t.style.fontSize="14px",t.style.fontWeight="600",t.style.pointerEvents="none",t.style.zIndex="9999";let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("width","16"),r.setAttribute("height","16"),r.setAttribute("fill","none"),r.setAttribute("stroke","currentColor"),r.setAttribute("stroke-width","2"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-linejoin","round");let s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M12 22s8-4 8-10a8 8 0 1 0-16 0c0 6 8 10 8 10z");let a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx","12"),a.setAttribute("cy","12"),a.setAttribute("r","3"),r.appendChild(s),r.appendChild(a);let i=document.createElement("span");return i.textContent=e||"Auto-filled",t.appendChild(r),t.appendChild(i),t};function q(){var e;let t=(0,i.useRouter)(),{user:r,isReady:o}=(0,P.a)(),{toast:n}=(0,B.pm)(),[d,c]=(0,a.useState)([J({id:"1",batchNumber:1})]),[u,x]=(0,a.useState)({status:"idle",message:""}),[h,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[g,b]=(0,a.useState)(0),[y,w]=(0,a.useState)("6WH"),[E,U]=(0,a.useState)([]),[q,$]=(0,a.useState)([]),[K,Q]=(0,a.useState)(null),[ee,et]=(0,a.useState)(null),er=(0,a.useRef)(null),[es,ea]=(0,a.useState)(!0),[ei,el]=(0,a.useState)(null),[eo,en]=(0,a.useState)(null),ed=(0,a.useRef)(d),ec=(0,a.useRef)(null),eu=(0,a.useRef)(0),ex=(0,a.useRef)(0),eh=(0,a.useRef)({}),ef=(0,a.useRef)({}),ep=e=>{let t=ec.current;t&&Z(t,e)};(0,a.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;return ea(t.isIntersecting)},{threshold:.1});return er.current&&e.observe(er.current),()=>e.disconnect()},[]),(0,a.useEffect)(()=>()=>{Object.values(eh.current).forEach(e=>{e&&clearTimeout(e)})},[]),(0,a.useEffect)(()=>{ed.current=d},[d]),(0,a.useEffect)(()=>{var e;if(!o)return;let t=function(e){let t=function(){let e=window.localStorage.getItem(H);if(e)return e;let t="".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,10));return window.localStorage.setItem(H,t),t}();return"drafts:".concat(e||"anonymous",":submit_report:").concat(t)}(null==r?void 0:r.ops_id);ec.current=t;let s=function(e){let t=window.localStorage.getItem(e);if(!t)return null;try{let r=JSON.parse(t);if(!r||!Array.isArray(r.rows))return null;if(r.last_saved_at){let t=new Date(r.last_saved_at).getTime();if(!Number.isNaN(t)&&Date.now()-t>6048e5)return window.localStorage.removeItem(e),null}return r}catch(e){return null}}(t);(null==s?void 0:null===(e=s.rows)||void 0===e?void 0:e.length)&&c(s.rows)},[o,null==r?void 0:r.ops_id]),(0,a.useEffect)(()=>{if(!o)return;let e=ec.current;if(!e)return;let t=setInterval(()=>{Z(e,ed.current)},G);return()=>clearInterval(t)},[o,null==r?void 0:r.ops_id]),(0,a.useEffect)(()=>{if("success"!==u.status){m(null);return}m(3);let e=window.setInterval(()=>{m(r=>null===r?r:r<=1?(clearInterval(e),t.push("/outbound/prealert"),null):r-1)},1e3);return()=>clearInterval(e)},[u.status,t]),(0,a.useEffect)(()=>{c(e=>e.some((e,t)=>e.batchNumber!==t+1)?e.map((e,t)=>({...e,batchNumber:t+1})):e)},[d.length]);let em=async(e,t)=>{eu.current+=1,U([]);let r=await z.gL.getHubs(t.cluster_name);if(r.error){n({variant:"destructive",title:"Lookup failed",description:r.error});return}let s=Array.isArray(r.data)?r.data:[];c(r=>{let a=r.findIndex(t=>t.id===e);if(-1===a)return r;let i=r[a],l=t.region||i.region,o=[...r];if(0===s.length)return o[a]={...i,clusterName:t.cluster_name,region:l,station:"",dockNumber:"",dockConfirmed:!1},o;let[n,...d]=s;if(o[a]={...i,clusterName:t.cluster_name,region:l,station:n.hub_name||"",dockNumber:n.dock_number||"",dockConfirmed:!1},d.length>0){let e=d.map(e=>J({clusterName:t.cluster_name,region:l,station:e.hub_name||"",dockNumber:e.dock_number||""}));o.splice(a+1,0,...e)}return o}),s.length>1&&n({title:"Cluster split",description:"Cluster maps to ".concat(s.length," hubs - added ").concat(s.length-1," row(s).")})},eg=(e,t)=>{if(c(r=>r.map(r=>r.id===e?{...r,clusterName:t,station:"",region:"",dockNumber:"",dockConfirmed:!1}:r)),t.length>=3){let r=++eu.current;z.gL.getClusters(void 0,t).then(t=>{let{data:s,error:a}=t;if(r===eu.current){if(a||!Array.isArray(s)){U([]),Q(null);return}U(s),Q(s.length>0?e:null)}})}else U([]),Q(null)},eb=(e,t)=>{if(c(r=>r.map(r=>r.id===e?{...r,processorName:t}:r)),t.length>=3){let r=++ex.current;z.gL.getProcessors(t).then(t=>{let{data:s,error:a}=t;if(r===ex.current){if(a||!Array.isArray(s)){$([]),et(null);return}$(s),et(s.length>0?e:null)}})}else $([]),et(null)},ey=(e,t)=>{let r=X(t.actual_docked_time),s=X(t.actual_depart_time);c(a=>a.map(a=>{var i,l,o,n,d,c,u,x,h,f;return a.id===e?{...a,clusterName:null!==(i=t.cluster_name)&&void 0!==i?i:a.clusterName,station:null!==(l=t.station_name)&&void 0!==l?l:a.station,region:null!==(o=t.region)&&void 0!==o?o:a.region,countTO:null!==(n=t.count_of_to)&&void 0!==n?n:a.countTO,totalOIDLoaded:null!==(d=t.total_oid_loaded)&&void 0!==d?d:a.totalOIDLoaded,actualDockedTime:r||a.actualDockedTime,dockNumber:null!==(c=t.dock_number)&&void 0!==c?c:a.dockNumber,actualDepartTime:s||a.actualDepartTime,processorName:null!==(u=t.processor_name)&&void 0!==u?u:a.processorName,plateNumber:null!==(x=t.plate_number)&&void 0!==x?x:a.plateNumber,fleetSize:null!==(h=t.fleet_size)&&void 0!==h?h:a.fleetSize,assignedPIC:null!==(f=t.assigned_ops_id)&&void 0!==f?f:a.assignedPIC}:a}))},ew=(e,t)=>{let r=t.toUpperCase();ev(e,"lHTripNumber",r);let s=eh.current[e];s&&clearTimeout(s),r.length<3||(eh.current[e]=setTimeout(async()=>{let t=(ef.current[e]||0)+1;ef.current[e]=t;let{data:s,error:a}=await z.gL.getLhTrip(r);ef.current[e]===t&&!a&&(null==s?void 0:s.row)&&ey(e,s.row)},450))},ej=e=>{let t=eh.current[e];t&&clearTimeout(t),delete eh.current[e],delete ef.current[e],c(t=>{let r=t.filter(t=>t.id!==e);return ep(r),r})},ev=(e,t,r)=>{c(s=>s.map(s=>s.id===e?{...s,[t]:r}:s))},eN=(e,t)=>{c(r=>{let s=r.findIndex(t=>t.id===e),a=s+t;if(-1===s||a<0||a>=r.length)return r;let i=[...r],[l]=i.splice(s,1);return i.splice(a,0,l),i})},ek=(e,t)=>{e!==t&&c(r=>{let s=r.findIndex(t=>t.id===e),a=r.findIndex(e=>e.id===t);if(-1===s||-1===a)return r;let i=[...r],[l]=i.splice(s,1);return i.splice(s<a?a-1:a,0,l),i})},eC=(e,t,r)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t);let s=Y(r);document.body.appendChild(s),e.dataTransfer.setDragImage(s,16,16),window.setTimeout(()=>{s.remove()},0),el(t)},eS=(e,t)=>{ei&&ei!==t&&(e.preventDefault(),e.dataTransfer.dropEffect="move",en(t))},eE=(e,t)=>{e.preventDefault();let r=e.dataTransfer.getData("text/plain")||ei;r&&(ek(r,t),el(null),en(null))},eA=()=>{el(null),en(null)},eD=d.length,eF=d.reduce((e,t)=>e+t.totalOIDLoaded,0),eT=ei?d.findIndex(e=>e.id===ei):-1,eI=eo?d.findIndex(e=>e.id===eo):-1,e_=(0,a.useMemo)(()=>g<30?{start:"#22C55E",end:"#16A34A"}:g<70?{start:"#F59E0B",end:"#D97706"}:{start:"#EF4444",end:"#DC2626"},[g]),eL=(0,a.useMemo)(()=>{switch(y){case"CONTAINER":return{shadowCx:320,shadowRx:280,containerWidth:416,containerX:22,containerY:27,containerHeight:71};case"10WH":return{shadowCx:300,shadowRx:250,containerWidth:356,containerX:32,containerY:32,containerHeight:64};case"6WH":return{shadowCx:240,shadowRx:180,containerWidth:216,containerX:82,containerY:40,containerHeight:51};default:return{shadowCx:230,shadowRx:120,containerWidth:146,containerX:122,containerY:47,containerHeight:41}}},[y]),eR=async()=>{var e,t,s,a,i,l,o,c,u,p;if(!r){n({variant:"destructive",title:"Login required",description:"Please log in before submitting a report."});return}if(h)return;let m=new Date().toISOString(),g=m.slice(0,10),b=d.filter(e=>e.clusterName||e.lHTripNumber||e.plateNumber);if(0===b.length){n({variant:"destructive",title:"Empty report",description:"Add at least one row before submitting."});return}let y=r.ops_id||r.email||r.name,w=b.map(e=>({id:e.id,cluster_name:e.clusterName,station_name:e.station,region:e.region,count_of_to:e.countTO,total_oid_loaded:e.totalOIDLoaded,actual_docked_time:e.actualDockedTime,dock_number:e.dockNumber,dock_confirmed:e.dockConfirmed,actual_depart_time:e.actualDepartTime||null,processor_name:e.processorName,lh_trip_number:e.lHTripNumber,plate_number:e.plateNumber,fleet_size:e.fleetSize,assigned_ops_id:e.assignedPIC}));f(!0),x({status:"submitting",message:"Submitting ".concat(w.length," row").concat(1===w.length?"":"s","..."),submittedCount:w.length});let j=await z.i$.submitRows(w,y);if(j.error){let e=(Array.isArray(null===(c=j.details)||void 0===c?void 0:c.rows)?j.details.rows:[]).map(e=>({rowIndex:"number"==typeof e.rowIndex?e.rowIndex:"number"==typeof e.index?e.index:0,status:"error",errors:e.errors}));x({status:"error",message:j.error,results:e.length?e:void 0,failedCount:e.length||void 0}),n({variant:"destructive",title:"Submit failed",description:j.error}),f(!1);return}let v=Array.isArray(null===(e=j.data)||void 0===e?void 0:e.results)?null===(t=j.data)||void 0===t?void 0:t.results.map(e=>({rowIndex:"number"==typeof e.rowIndex?e.rowIndex:0,status:"created"===e.status?"created":"error",errors:e.errors})):w.map((e,t)=>({rowIndex:t,status:"created"})),N="number"==typeof(null===(s=j.data)||void 0===s?void 0:s.submitted)?j.data.submitted:"number"==typeof(null===(a=j.data)||void 0===a?void 0:a.created_count)?j.data.created_count:v.filter(e=>"created"===e.status).length,k="number"==typeof(null===(i=j.data)||void 0===i?void 0:i.failed)?j.data.failed:v.filter(e=>"error"===e.status).length,C=(null===(l=j.data)||void 0===l?void 0:l.ok)===!0&&0===k,S="string"==typeof(null===(o=j.data)||void 0===o?void 0:o.error)?j.data.error:void 0;C?(u=[...b.map((e,t)=>({id:"dispatch-".concat(Date.now(),"-").concat(t),status:"Pending",reporter:r.name,hub:e.station||"Unassigned Hub",batch:"Batch ".concat(e.batchNumber),lh_trip:e.lHTripNumber,plate:e.plateNumber,date:g,submittedBy:r.name,submittedByOpsId:r.ops_id,notes:"",createdAt:m,statusUpdatedAt:m,editCount:0,editHistory:[]})),...function(){let e=window.localStorage.getItem(M);if(!e)return[];try{let t=JSON.parse(e);if(Array.isArray(t))return t}catch(e){}return[]}()],window.localStorage.setItem(M,JSON.stringify(u)),ec.current&&(p=ec.current,window.localStorage.removeItem(p)),x({status:"success",message:"Submitted successfully.",results:v,submittedCount:N,failedCount:0})):x({status:"error",message:S||(k>0?"Submitted with errors.":"Submit failed"),results:v,submittedCount:N,failedCount:k}),f(!1),n({title:C?"Report submitted":"Submit completed with errors",description:C?"Submitted ".concat(N," dispatch row").concat(1===N?"":"s","."):"Failed ".concat(k," row").concat(1===k?"":"s",".")})};return(0,s.jsxs)("div",{className:"max-w-9xl mx-auto px-4 py-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 mb-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden border border-gray-100 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600 via-orange-500 to-amber-500"}),es&&(0,s.jsx)(l.E.div,{className:"absolute inset-0 opacity-30",animate:{background:["radial-gradient(circle at 0% 50%, rgba(255,255,255,0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 50%, rgba(255,255,255,0.3) 0%, transparent 50%)","radial-gradient(circle at 0% 50%, rgba(255,255,255,0.3) 0%, transparent 50%)"]},transition:{duration:5,repeat:1/0,ease:"easeInOut"}}),(0,s.jsx)("div",{className:"relative px-6 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"font-black text-white text-xl tracking-tight drop-shadow-md",children:"Truck Loading Status"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(l.E.div,{className:"relative bg-white/15 backdrop-blur-md rounded-xl px-4 py-2 text-center min-w-[100px] border border-white/20 shadow-lg overflow-hidden group cursor-pointer",whileHover:{scale:1.05,y:-1},transition:{type:"spring",stiffness:400},children:[(0,s.jsxs)("div",{className:"relative flex items-center justify-center gap-2 mb-0.5",children:[(0,s.jsx)(v.Z,{className:"h-3.5 w-3.5 text-white/80"}),(0,s.jsx)("p",{className:"text-white/90 text-xs font-semibold uppercase tracking-wider",children:"Batches"})]}),(0,s.jsx)("p",{className:"relative text-white text-2xl font-black tracking-tight",children:eD})]}),(0,s.jsxs)(l.E.div,{className:"relative bg-white/15 backdrop-blur-md rounded-xl px-4 py-2 text-center min-w-[100px] border border-white/20 shadow-lg overflow-hidden group cursor-pointer",whileHover:{scale:1.05,y:-1},transition:{type:"spring",stiffness:400},children:[(0,s.jsxs)("div",{className:"relative flex items-center justify-center gap-2 mb-0.5",children:[(0,s.jsx)(N.Z,{className:"h-3.5 w-3.5 text-white/80"}),(0,s.jsx)("p",{className:"text-white/90 text-xs font-semibold uppercase tracking-wider",children:"Volume"})]}),(0,s.jsx)("p",{className:"relative text-white text-2xl font-black tracking-tight",children:eF.toLocaleString()})]})]}),(0,s.jsxs)(l.E.div,{className:"flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-xl px-4 py-2 border border-white/20 shadow-lg",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400},children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(k.Z,{className:"h-3.5 w-3.5 text-yellow-300"}),(0,s.jsx)("span",{className:"text-white/90 text-xs font-semibold uppercase tracking-wider",children:"Fleet"}),(0,s.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"h-8 px-3 text-sm font-bold rounded-lg border-0 bg-white text-gray-900 focus:ring-2 focus:ring-yellow-400 shadow-md cursor-pointer",children:[(0,s.jsx)("option",{value:"4WH",children:"4 Wheeler"}),(0,s.jsx)("option",{value:"6WH",children:"6 Wheeler"}),(0,s.jsx)("option",{value:"10WH",children:"10 Wheeler"}),(0,s.jsx)("option",{value:"CONTAINER",children:"Container Van"})]})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-white/30"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-white/90 text-xs font-semibold uppercase tracking-wider",children:"Load"}),(0,s.jsx)(O.I,{type:"number",min:"0",max:"100",value:g,onChange:e=>b(Math.min(100,Math.max(0,parseInt(e.target.value)||0))),className:"w-16 h-8 text-center font-black text-sm border-0 bg-white text-gray-900 shadow-md rounded-lg"}),(0,s.jsx)("span",{className:"text-white font-black",children:"%"})]})]})]})]})})]}),(0,s.jsxs)("div",{className:"relative w-full h-[150px] flex items-center justify-center overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-sky-50 via-slate-50 to-gray-100 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800"}),(0,s.jsxs)("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 800 180",preserveAspectRatio:"xMidYMid slice",children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"skyGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#CBD5E1"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#E2E8F0"})]}),(0,s.jsxs)("linearGradient",{id:"warehouseWall",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#94A3B8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#64748B"})]}),(0,s.jsxs)("linearGradient",{id:"warehouseRoof",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#475569"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#334155"})]})]}),(0,s.jsx)("rect",{x:"0",y:"50",width:"100",height:"50",fill:"url(#warehouseWall)"}),(0,s.jsx)("polygon",{points:"0,50 50,30 100,50",fill:"url(#warehouseRoof)"}),(0,s.jsx)("rect",{x:"700",y:"45",width:"100",height:"55",fill:"url(#warehouseWall)"}),(0,s.jsx)("polygon",{points:"700,45 750,25 800,45",fill:"url(#warehouseRoof)"}),(0,s.jsx)("rect",{x:"180",y:"35",width:"440",height:"65",fill:"#CBD5E1"}),(0,s.jsx)("polygon",{points:"180,35 400,10 620,35",fill:"#64748B"}),Array.from({length:6},(e,t)=>(0,s.jsx)("rect",{x:210+65*t,y:"50",width:"30",height:"20",fill:"#94A3B8"},t))]}),es&&(0,s.jsx)(l.E.div,{className:"absolute inset-0 opacity-5",animate:{background:["linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.8) 50%, transparent 100%)"],backgroundPosition:["-100% 0%","200% 0%"]},transition:{duration:4,repeat:1/0,ease:"linear"},style:{backgroundSize:"50% 100%"}}),(0,s.jsxs)("svg",{viewBox:"0 0 700 120",className:"w-full h-full relative z-10",preserveAspectRatio:"xMidYMid meet",children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"cabMetallic",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#FF8C5A"}),(0,s.jsx)("stop",{offset:"15%",stopColor:"#FF6B35"}),(0,s.jsx)("stop",{offset:"50%",stopColor:"#EE4D2D"}),(0,s.jsx)("stop",{offset:"85%",stopColor:"#D73211"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#B82A0E"})]}),(0,s.jsxs)("linearGradient",{id:"cabHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.4)"}),(0,s.jsx)("stop",{offset:"50%",stopColor:"rgba(255,255,255,0.1)"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"rgba(255,255,255,0)"})]}),(0,s.jsxs)("linearGradient",{id:"containerBody",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#FFD4C4"}),(0,s.jsx)("stop",{offset:"50%",stopColor:"#FFBDA8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#FFA88C"})]}),(0,s.jsxs)("linearGradient",{id:"containerShadow",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.3)"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"rgba(0,0,0,0.1)"})]}),(0,s.jsxs)("linearGradient",{id:"containerHighlight",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.5)"}),(0,s.jsx)("stop",{offset:"50%",stopColor:"rgba(255,255,255,0.2)"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"rgba(0,0,0,0)"})]}),(0,s.jsxs)("linearGradient",{id:"loadFill",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:e_.start}),(0,s.jsx)("stop",{offset:"100%",stopColor:e_.end})]}),(0,s.jsxs)("linearGradient",{id:"loadShine",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.5)"}),(0,s.jsx)("stop",{offset:"50%",stopColor:"rgba(255,255,255,0.1)"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"rgba(0,0,0,0.1)"})]}),(0,s.jsxs)("linearGradient",{id:"glassGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#B4E4FF"}),(0,s.jsx)("stop",{offset:"30%",stopColor:"#87CEEB"}),(0,s.jsx)("stop",{offset:"70%",stopColor:"#5DADE2"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#3498DB"})]}),(0,s.jsxs)("radialGradient",{id:"tireReal",cx:"50%",cy:"50%",r:"50%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#4B5563"}),(0,s.jsx)("stop",{offset:"60%",stopColor:"#1F2937"}),(0,s.jsx)("stop",{offset:"80%",stopColor:"#111827"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#030712"})]}),(0,s.jsxs)("radialGradient",{id:"rimReal",cx:"30%",cy:"30%",r:"70%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#F9FAFB"}),(0,s.jsx)("stop",{offset:"40%",stopColor:"#D1D5DB"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#6B7280"})]}),(0,s.jsxs)("linearGradient",{id:"chromeReal",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,s.jsx)("stop",{offset:"20%",stopColor:"#E5E7EB"}),(0,s.jsx)("stop",{offset:"40%",stopColor:"#9CA3AF"}),(0,s.jsx)("stop",{offset:"60%",stopColor:"#E5E7EB"}),(0,s.jsx)("stop",{offset:"80%",stopColor:"#9CA3AF"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#6B7280"})]}),(0,s.jsx)("filter",{id:"truckDropShadow",x:"-20%",y:"-20%",width:"140%",height:"160%",children:(0,s.jsx)("feDropShadow",{dx:"0",dy:"4",stdDeviation:"4",floodColor:"#000",floodOpacity:"0.3"})}),(0,s.jsxs)("filter",{id:"softGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,s.jsx)("feGaussianBlur",{stdDeviation:"2",result:"blur"}),(0,s.jsxs)("feMerge",{children:[(0,s.jsx)("feMergeNode",{in:"blur"}),(0,s.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,s.jsx)("rect",{x:"0",y:"105",width:"700",height:"15",fill:"#374151"}),(0,s.jsx)("rect",{x:"0",y:"105",width:"700",height:"2",fill:"#4B5563"}),Array.from({length:8},(e,t)=>(0,s.jsx)("rect",{x:20+90*t,y:"111",width:"40",height:"3",rx:"1",fill:"#FCD34D"},t)),(0,s.jsx)("ellipse",{cx:eL.shadowCx,cy:"108",rx:eL.shadowRx,ry:"6",fill:"rgba(0,0,0,0.3)"}),(0,s.jsxs)("g",{filter:"url(#truckDropShadow)",children:["CONTAINER"===y?(0,s.jsxs)("g",{children:[(0,s.jsx)("rect",{x:"20",y:"25",width:"420",height:"75",rx:"2",fill:"url(#containerBody)"}),(0,s.jsx)("rect",{x:"20",y:"25",width:"420",height:"75",rx:"2",fill:"url(#containerHighlight)"}),Array.from({length:6},(e,t)=>(0,s.jsx)("rect",{x:70+70*t,y:"25",width:"2",height:"75",fill:"rgba(0,0,0,0.1)"},t)),(0,s.jsx)("text",{x:"230",y:"55",textAnchor:"middle",fill:"#FFFFFF",fontSize:"16",fontWeight:"bold",fontFamily:"Arial, sans-serif",children:"Shopee"}),(0,s.jsx)("text",{x:"230",y:"75",textAnchor:"middle",fill:"#FFFFFF",fontSize:"20",fontWeight:"900",fontFamily:"Arial, sans-serif",letterSpacing:"2",children:"XPRESS"}),(0,s.jsx)("clipPath",{id:"containerClipPath",children:(0,s.jsx)("rect",{x:"22",y:"27",width:"416",height:"71",rx:"1"})}),(0,s.jsx)("g",{clipPath:"url(#containerClipPath)",children:(0,s.jsx)("rect",{x:"22",y:"27",height:"71",fill:"url(#loadFill)",opacity:"0.7",width:eL.containerWidth,style:{transform:"scaleX(".concat(g/100,")"),transformOrigin:"left",transition:"transform 0.8s ease-out"}})}),(0,s.jsx)("rect",{x:"20",y:"25",width:"420",height:"75",rx:"2",fill:"none",stroke:"#B82A0E",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"20",y:"98",width:"420",height:"6",fill:"#8B2510"})]}):"10WH"===y?(0,s.jsxs)("g",{children:[(0,s.jsx)("rect",{x:"30",y:"30",width:"360",height:"68",rx:"3",fill:"url(#containerBody)"}),(0,s.jsx)("rect",{x:"30",y:"30",width:"360",height:"68",rx:"3",fill:"url(#containerHighlight)"}),Array.from({length:5},(e,t)=>(0,s.jsx)("rect",{x:80+70*t,y:"30",width:"2",height:"68",fill:"rgba(0,0,0,0.1)"},t)),(0,s.jsx)("text",{x:"210",y:"58",textAnchor:"middle",fill:"#FFFFFF",fontSize:"14",fontWeight:"bold",fontFamily:"Arial, sans-serif",children:"Shopee"}),(0,s.jsx)("text",{x:"210",y:"78",textAnchor:"middle",fill:"#FFFFFF",fontSize:"18",fontWeight:"900",fontFamily:"Arial, sans-serif",letterSpacing:"2",children:"XPRESS"}),(0,s.jsx)("clipPath",{id:"container10Clip",children:(0,s.jsx)("rect",{x:"32",y:"32",width:"356",height:"64",rx:"2"})}),(0,s.jsx)("g",{clipPath:"url(#container10Clip)",children:(0,s.jsx)("rect",{x:"32",y:"32",height:"64",fill:"url(#loadFill)",opacity:"0.7",width:"356",style:{transform:"scaleX(".concat(g/100,")"),transformOrigin:"left",transition:"transform 0.8s ease-out"}})}),(0,s.jsx)("rect",{x:"30",y:"30",width:"360",height:"68",rx:"3",fill:"none",stroke:"#B82A0E",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"30",y:"96",width:"360",height:"6",fill:"#8B2510"})]}):"6WH"===y?(0,s.jsxs)("g",{children:[(0,s.jsx)("rect",{x:"80",y:"38",width:"220",height:"55",rx:"3",fill:"url(#containerBody)"}),(0,s.jsx)("rect",{x:"80",y:"38",width:"220",height:"55",rx:"3",fill:"url(#containerHighlight)"}),Array.from({length:3},(e,t)=>(0,s.jsx)("rect",{x:130+55*t,y:"38",width:"2",height:"55",fill:"rgba(0,0,0,0.1)"},t)),(0,s.jsx)("text",{x:"190",y:"60",textAnchor:"middle",fill:"#EE4D2D",fontSize:"10",fontWeight:"bold",fontFamily:"Arial, sans-serif",children:"Shopee"}),(0,s.jsx)("text",{x:"190",y:"76",textAnchor:"middle",fill:"#EE4D2D",fontSize:"13",fontWeight:"900",fontFamily:"Arial, sans-serif",letterSpacing:"1",children:"XPRESS"}),(0,s.jsx)("clipPath",{id:"container6Clip",children:(0,s.jsx)("rect",{x:"82",y:"40",width:"216",height:"51",rx:"2"})}),(0,s.jsx)("g",{clipPath:"url(#container6Clip)",children:(0,s.jsx)("rect",{x:"82",y:"40",height:"51",fill:"url(#loadFill)",width:"216",style:{transform:"scaleX(".concat(g/100,")"),transformOrigin:"left",transition:"transform 0.8s ease-out"}})}),(0,s.jsx)("rect",{x:"80",y:"38",width:"220",height:"55",rx:"3",fill:"none",stroke:"#FFA07A",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"80",y:"91",width:"220",height:"5",fill:"#CD5C5C"})]}):(0,s.jsxs)("g",{children:[(0,s.jsx)("rect",{x:"120",y:"45",width:"150",height:"45",rx:"3",fill:"url(#containerBody)"}),(0,s.jsx)("rect",{x:"120",y:"45",width:"150",height:"45",rx:"3",fill:"url(#containerHighlight)"}),Array.from({length:2},(e,t)=>(0,s.jsx)("rect",{x:165+50*t,y:"45",width:"2",height:"45",fill:"rgba(0,0,0,0.1)"},t)),(0,s.jsx)("text",{x:"195",y:"62",textAnchor:"middle",fill:"#EE4D2D",fontSize:"8",fontWeight:"bold",fontFamily:"Arial, sans-serif",children:"Shopee"}),(0,s.jsx)("text",{x:"195",y:"76",textAnchor:"middle",fill:"#EE4D2D",fontSize:"10",fontWeight:"900",fontFamily:"Arial, sans-serif",letterSpacing:"1",children:"XPRESS"}),(0,s.jsx)("clipPath",{id:"container4Clip",children:(0,s.jsx)("rect",{x:"122",y:"47",width:"146",height:"41",rx:"2"})}),(0,s.jsx)("g",{clipPath:"url(#container4Clip)",children:(0,s.jsx)("rect",{x:"122",y:"47",height:"41",fill:"url(#loadFill)",width:"146",style:{transform:"scaleX(".concat(g/100,")"),transformOrigin:"left",transition:"transform 0.8s ease-out"}})}),(0,s.jsx)("rect",{x:"120",y:"45",width:"150",height:"45",rx:"3",fill:"none",stroke:"#FFA07A",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"120",y:"88",width:"150",height:"4",fill:"#CD5C5C"})]}),"CONTAINER"===y?(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M440 30 L440 100 L530 100 L530 55 L510 30 Z",fill:"url(#cabMetallic)"}),(0,s.jsx)("path",{d:"M440 30 L440 100 L530 100 L530 55 L510 30 Z",fill:"url(#cabHighlight)"}),(0,s.jsx)("path",{d:"M445 35 L505 35 L520 55 L520 70 L445 70 Z",fill:"url(#glassGradient)",stroke:"#1F2937",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"447",y:"37",width:"20",height:"10",rx:"2",fill:"rgba(255,255,255,0.5)"}),(0,s.jsx)("rect",{x:"445",y:"75",width:"40",height:"22",rx:"2",fill:"#D73211",stroke:"#B82A0E",strokeWidth:"1"}),(0,s.jsx)("rect",{x:"455",y:"82",width:"25",height:"10",rx:"2",fill:"#FFFFFF"}),(0,s.jsx)("text",{x:"467",y:"90",textAnchor:"middle",fill:"#EE4D2D",fontSize:"7",fontWeight:"bold",children:"SPX"})]}):"10WH"===y?(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M390 35 L390 98 L470 98 L470 55 L455 35 Z",fill:"url(#cabMetallic)"}),(0,s.jsx)("path",{d:"M390 35 L390 98 L470 98 L470 55 L455 35 Z",fill:"url(#cabHighlight)"}),(0,s.jsx)("path",{d:"M395 40 L450 40 L465 55 L465 68 L395 68 Z",fill:"url(#glassGradient)",stroke:"#1F2937",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"397",y:"42",width:"18",height:"8",rx:"2",fill:"rgba(255,255,255,0.5)"}),(0,s.jsx)("rect",{x:"395",y:"72",width:"38",height:"22",rx:"2",fill:"#D73211",stroke:"#B82A0E",strokeWidth:"1"}),(0,s.jsx)("rect",{x:"403",y:"80",width:"22",height:"9",rx:"2",fill:"#FFFFFF"}),(0,s.jsx)("text",{x:"414",y:"87",textAnchor:"middle",fill:"#EE4D2D",fontSize:"6",fontWeight:"bold",children:"SPX"})]}):"6WH"===y?(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M300 43 L300 93 L360 93 L360 60 L350 43 Z",fill:"url(#cabMetallic)"}),(0,s.jsx)("path",{d:"M300 43 L300 93 L360 93 L360 60 L350 43 Z",fill:"url(#cabHighlight)"}),(0,s.jsx)("path",{d:"M305 48 L345 48 L355 60 L355 68 L305 68 Z",fill:"url(#glassGradient)",stroke:"#1F2937",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"307",y:"50",width:"12",height:"6",rx:"1",fill:"rgba(255,255,255,0.5)"}),(0,s.jsx)("rect",{x:"305",y:"72",width:"30",height:"18",rx:"2",fill:"#D73211",stroke:"#B82A0E",strokeWidth:"1"}),(0,s.jsx)("rect",{x:"310",y:"77",width:"18",height:"7",rx:"1",fill:"#FFFFFF"}),(0,s.jsx)("text",{x:"319",y:"83",textAnchor:"middle",fill:"#EE4D2D",fontSize:"4",fontWeight:"bold",children:"SPX"})]}):(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M270 50 L270 90 L320 90 L320 62 L312 50 Z",fill:"url(#cabMetallic)"}),(0,s.jsx)("path",{d:"M270 50 L270 90 L320 90 L320 62 L312 50 Z",fill:"url(#cabHighlight)"}),(0,s.jsx)("path",{d:"M274 54 L308 54 L316 62 L316 68 L274 68 Z",fill:"url(#glassGradient)",stroke:"#1F2937",strokeWidth:"1.5"}),(0,s.jsx)("rect",{x:"276",y:"56",width:"10",height:"5",rx:"1",fill:"rgba(255,255,255,0.5)"}),(0,s.jsx)("rect",{x:"274",y:"71",width:"25",height:"15",rx:"2",fill:"#D73211",stroke:"#B82A0E",strokeWidth:"1"}),(0,s.jsx)("rect",{x:"278",y:"74",width:"15",height:"6",rx:"1",fill:"#FFFFFF"}),(0,s.jsx)("text",{x:"285",y:"79",textAnchor:"middle",fill:"#EE4D2D",fontSize:"3",fontWeight:"bold",children:"SPX"})]})]}),"CONTAINER"===y?(0,s.jsx)("g",{children:[60,90,350,380,500].map((e,t)=>(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{cx:e,cy:"102",r:"14",fill:"url(#tireReal)"}),(0,s.jsx)("circle",{cx:e,cy:"102",r:"9",fill:"url(#rimReal)"}),(0,s.jsx)("circle",{cx:e,cy:"102",r:"3",fill:"#4B5563"})]},t))}):"10WH"===y?(0,s.jsx)("g",{children:[70,100,300,330,450].map((e,t)=>(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{cx:e,cy:"100",r:"13",fill:"url(#tireReal)"}),(0,s.jsx)("circle",{cx:e,cy:"100",r:"8",fill:"url(#rimReal)"}),(0,s.jsx)("circle",{cx:e,cy:"100",r:"3",fill:"#4B5563"})]},t))}):"6WH"===y?(0,s.jsx)("g",{children:[120,260,350].map((e,t)=>(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{cx:e,cy:"96",r:"11",fill:"url(#tireReal)"}),(0,s.jsx)("circle",{cx:e,cy:"96",r:"6",fill:"url(#rimReal)"}),(0,s.jsx)("circle",{cx:e,cy:"96",r:"2",fill:"#4B5563"})]},t))}):(0,s.jsx)("g",{children:[155,235,310].map((e,t)=>(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{cx:e,cy:"94",r:"9",fill:"url(#tireReal)"}),(0,s.jsx)("circle",{cx:e,cy:"94",r:"5",fill:"url(#rimReal)"}),(0,s.jsx)("circle",{cx:e,cy:"94",r:"1.5",fill:"#4B5563"})]},t))}),(0,s.jsxs)("g",{children:[(0,s.jsx)("rect",{x:"550",y:"15",width:"130",height:"45",rx:"8",fill:"rgba(255,255,255,0.95)",stroke:"#E5E7EB",strokeWidth:"1"}),(0,s.jsx)("text",{x:"615",y:"32",textAnchor:"middle",fill:"#64748B",fontSize:"9",fontWeight:"500",children:"CONTAINER"===y?"Container Van":"10WH"===y?"10 Wheeler":"6WH"===y?"6 Wheeler":"4 Wheeler"}),(0,s.jsxs)("text",{x:"615",y:"52",textAnchor:"middle",fill:g<30?"#22C55E":g<70?"#F59E0B":"#EF4444",fontSize:"18",fontWeight:"bold",children:[g,"% LOADED"]})]})]})]}),(0,s.jsxs)("div",{className:"px-4 py-2 bg-gradient-to-r from-slate-50 to-gray-50 dark:from-gray-800 dark:to-gray-900",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("h4",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:"Loading Progress"}),(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-black ".concat(g<30?"bg-emerald-500 text-white":g<70?"bg-amber-500 text-white":"bg-red-500 text-white"),children:[g,"% LOADED"]})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden shadow-inner relative",children:(0,s.jsx)(l.E.div,{initial:{width:0},animate:{width:"".concat(g,"%")},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full relative overflow-hidden ".concat(g<30?"bg-gradient-to-r from-emerald-400 to-emerald-600":g<70?"bg-gradient-to-r from-amber-400 to-amber-600":"bg-gradient-to-r from-orange-500 to-red-600"),children:(0,s.jsx)(l.E.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-40",animate:{x:["-100%","100%"]},transition:{duration:1.2,repeat:1/0,ease:"linear"}})})})}),(0,s.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 ".concat(g<30?"text-emerald-600":"text-gray-400"),children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(g<30?"bg-emerald-500":"bg-gray-300")}),(0,s.jsx)("span",{className:"text-xs font-semibold",children:"Low"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 ".concat(g>=30&&g<70?"text-amber-600":"text-gray-400"),children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(g>=30&&g<70?"bg-amber-500":"bg-gray-300")}),(0,s.jsx)("span",{className:"text-xs font-semibold",children:"Medium"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 ".concat(g>=70?"text-red-600":"text-gray-400"),children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(g>=70?"bg-red-500":"bg-gray-300")}),(0,s.jsx)("span",{className:"text-xs font-semibold",children:"High"})]})]})]})]})}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},whileHover:{scale:1.02,boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",transition:{duration:.3}},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-5 flex-shrink-0 cursor-pointer w-full lg:w-[280px]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,s.jsx)("div",{className:"h-8 w-8 bg-blue-50 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:(0,s.jsx)(C.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 text-xs",children:["S","M","T","W","T","F","S"].map((e,t)=>(0,s.jsx)("div",{className:"text-center font-medium text-gray-500 dark:text-gray-400 py-1",children:e},t))}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 text-xs",children:(()=>{let e=new Date,t=e.getFullYear(),r=e.getMonth(),a=new Date(t,r,1).getDay(),i=new Date(t,r+1,0).getDate(),l=[];for(let e=0;e<a;e++)l.push((0,s.jsx)("div",{className:"text-center py-1.5"},"empty-".concat(e)));for(let t=1;t<=i;t++){let r=t===e.getDate();l.push((0,s.jsx)("div",{className:"\n                        text-center py-1.5 rounded-md cursor-pointer transition-colors\n                        ".concat(r?"bg-blue-600 text-white font-semibold":"text-gray-600 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/20","\n                      "),children:t},t))}return l})()})]})]})]}),(0,s.jsx)("div",{className:"flex justify-start items-center mb-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(R.z,{onClick:()=>{c(e=>{let t=[...e,J()];return ep(t),t})},className:"bg-gradient-to-r from-sky-400 to-sky-500 hover:from-sky-500 hover:to-sky-600 text-white shadow-md hover:shadow-lg transition-all duration-300 hover:scale-105 border-0",children:[(0,s.jsx)(S.Z,{className:"h-4 w-4 mr-2"}),"Add Row"]}),(0,s.jsxs)(R.z,{onClick:()=>{Object.values(eh.current).forEach(e=>{e&&clearTimeout(e)}),eh.current={},ef.current={};let e=[J({id:"1",batchNumber:1})];c(e),ep(e),b(0)},variant:"outline",className:"border-rose-300 text-rose-600 hover:bg-rose-50 hover:border-rose-400 transition-all duration-300 hover:scale-105",children:[(0,s.jsx)(A,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})}),(0,s.jsxs)("div",{className:"relative rounded-3xl border border-slate-200/70 bg-white/80 shadow-[0_18px_45px_rgba(15,23,42,0.08)] overflow-visible backdrop-blur",children:[(0,s.jsx)("div",{className:"pointer-events-none absolute inset-x-6 top-0 h-px bg-gradient-to-r from-transparent via-slate-200/80 to-transparent"}),(0,s.jsx)("div",{ref:er,className:"overflow-x-auto overflow-y-visible min-h-[360px] p-3",children:(0,s.jsxs)("table",{className:"w-full border-collapse text-xs text-slate-700",children:[(0,s.jsx)("thead",{className:"sticky top-0 z-10 bg-slate-50/90 backdrop-blur",children:(0,s.jsxs)("tr",{className:"h-9 border-b border-slate-200/70",children:[(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Batch #"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Cluster Name"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Station"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Region"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Count of TO"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Total OID Loaded"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Actual Docked Time"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Dock #"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Actual Depart Time"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Name of Processor"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"LH Trip #"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Plate #"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Fleet Size"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Assigned PIC / OPS Coor"}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left font-semibold text-[10px] uppercase tracking-[0.18em] text-slate-500 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:(0,s.jsx)(j,{children:d.map((e,t)=>(0,s.jsxs)(l.E.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.05*t},onDragOver:t=>eS(t,e.id),onDrop:t=>eE(t,e.id),className:"transition-colors duration-200 ".concat(t%2==0?"bg-white":"bg-slate-50/40"," hover:bg-slate-50/80 border-l-2 border-l-transparent hover:border-sky-400 ").concat(eo===e.id&&ei?"bg-amber-50 ring-2 ring-amber-200 shadow-sm":""," ").concat(ei?"transition-transform duration-200 ease-in-out":""),style:{height:"40px",transform:(()=>{let r=ei&&eo&&e.id!==ei&&-1!==eT&&-1!==eI&&(eT<eI&&t>eT&&t<=eI||eT>eI&&t>=eI&&t<eT)?"translateY(".concat(eT<eI?"-40px":"40px",")"):"",s=eo===e.id&&ei&&-1!==eT&&-1!==eI?" translateY(".concat(eT<eI?"-6px":"6px",")"):"";return"".concat(r).concat(s).trim()||void 0})()},children:[(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-lg bg-gradient-to-br from-sky-100 to-sky-200 text-sky-800 font-bold text-xs shadow-sm",children:e.batchNumber})}),(0,s.jsxs)("td",{className:"px-2 py-1.5 whitespace-nowrap relative border-l border-slate-200/70 first:border-l-0",children:[(0,s.jsx)(O.I,{value:e.clusterName,onChange:t=>eg(e.id,t.target.value),placeholder:"Type 3+ chars...",className:"w-32 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"}),K===e.id&&E.length>0&&(0,s.jsx)("div",{className:"absolute z-50 mt-1 w-56 bg-white border border-gray-200 rounded-xl shadow-lg max-h-40 overflow-auto",children:E.map(t=>(0,s.jsxs)("div",{onClick:()=>{Q(null),em(e.id,t)},className:"px-4 py-3 hover:bg-sky-50 cursor-pointer text-sm transition-colors",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:t.cluster_name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:t.region})]},t.cluster_name))})]}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(D.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("div",{className:"flex items-center gap-2 cursor-grab active:cursor-grabbing transition-transform duration-150 ".concat(ei===e.id?"opacity-60":""," ").concat(eo===e.id&&ei?"text-amber-700":""),draggable:!0,onDragStart:t=>eC(t,e.id,e.station),onDragEnd:eA,"aria-label":"Drag row to reorder",children:(0,s.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:e.station||"Auto-filled"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(R.z,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-400 hover:text-gray-700",onClick:()=>eN(e.id,-1),disabled:0===t,"aria-label":"Move row up",children:(0,s.jsx)(F.Z,{className:"h-4 w-4"})}),(0,s.jsx)(R.z,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-gray-400 hover:text-gray-700",onClick:()=>eN(e.id,1),disabled:t===d.length-1,"aria-label":"Move row down",children:(0,s.jsx)(T.Z,{className:"h-4 w-4"})})]})]})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(W.C,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full bg-slate-100 text-slate-700",children:e.region||"Auto-filled"})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(O.I,{value:e.countTO,onChange:t=>ev(e.id,"countTO",t.target.value),className:"w-20 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(O.I,{type:"number",min:"0",value:e.totalOIDLoaded,onChange:t=>ev(e.id,"totalOIDLoaded",parseInt(t.target.value)||0),className:"w-24 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(O.I,{type:"datetime-local",value:e.actualDockedTime,onChange:t=>ev(e.id,"actualDockedTime",t.target.value),className:"w-32 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(O.I,{value:e.dockNumber,onChange:t=>ev(e.id,"dockNumber",t.target.value),className:"w-20 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"}),(0,s.jsx)("input",{type:"checkbox",checked:e.dockConfirmed,onChange:t=>ev(e.id,"dockConfirmed",t.target.checked),className:"h-5 w-5 text-sky-600 rounded-lg border-gray-300 focus:ring-sky-500"})]})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(O.I,{type:"datetime-local",value:e.actualDepartTime,onChange:t=>ev(e.id,"actualDepartTime",t.target.value),min:e.actualDockedTime,className:"w-32 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"})}),(0,s.jsxs)("td",{className:"px-2 py-1.5 whitespace-nowrap relative border-l border-slate-200/70 first:border-l-0",children:[(0,s.jsx)(O.I,{value:e.processorName,onChange:t=>eb(e.id,t.target.value),placeholder:"Type 3+ chars...",className:"w-32 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"}),ee===e.id&&q.length>0&&(0,s.jsx)("div",{className:"absolute z-50 mt-1 w-56 bg-white border border-gray-200 rounded-xl shadow-lg max-h-40 overflow-auto",children:q.map(t=>(0,s.jsxs)("div",{onClick:()=>{ex.current+=1,$([]),ev(e.id,"processorName",t.name),et(null)},className:"px-4 py-3 hover:bg-sky-50 cursor-pointer text-sm transition-colors",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:t.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:t.ops_id})]},t.ops_id||t.name))})]}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(O.I,{value:e.lHTripNumber,onChange:t=>ew(e.id,t.target.value),placeholder:"LT...",className:"w-24 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 uppercase focus:bg-white"})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(O.I,{value:e.plateNumber,onChange:t=>ev(e.id,"plateNumber",t.target.value.toUpperCase()),className:"w-20 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 uppercase focus:bg-white"})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)("select",{value:e.fleetSize,onChange:t=>ev(e.id,"fleetSize",t.target.value),className:"w-[72px] h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 px-2 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white",children:V.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(I.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)(O.I,{value:e.assignedPIC,onChange:t=>ev(e.id,"assignedPIC",t.target.value),placeholder:"OPS ID...",className:"w-24 h-8 text-xs border-gray-200 rounded-lg bg-slate-50/80 focus:border-sky-400 focus:ring-2 focus:ring-sky-100 focus:bg-white"})]})}),(0,s.jsx)("td",{className:"px-2 py-1.5 whitespace-nowrap border-l border-slate-200/70 first:border-l-0",children:(0,s.jsx)(R.z,{onClick:()=>ej(e.id),variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-rose-500 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-all duration-200 hover:scale-110",children:(0,s.jsx)(_.Z,{className:"h-4 w-4"})})})]},e.id))})})]})})]}),(0,s.jsx)("div",{className:"flex justify-center mt-8",children:(0,s.jsxs)(R.z,{className:"bg-gradient-to-r from-emerald-400 to-emerald-500 hover:from-emerald-500 hover:to-emerald-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 px-8 py-3 text-base font-semibold border-0",onClick:eR,disabled:h,children:[(0,s.jsx)(L,{className:"h-5 w-5 mr-2"}),h?"Submitting...":"Submit Report"]})}),"idle"!==u.status&&(0,s.jsxs)("div",{className:"mt-4 w-full max-w-2xl mx-auto rounded-2xl border border-slate-200/70 bg-white/90 px-4 py-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat("error"===u.status?"text-rose-600":"text-slate-700"),children:u.message}),"success"===u.status&&(0,s.jsx)(R.z,{variant:"outline",size:"sm",onClick:()=>t.push("/outbound/prealert"),children:"Go now"})]}),"success"===u.status&&"number"==typeof u.submittedCount&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["Summary: ",u.submittedCount," row",1===u.submittedCount?"":"s"," submitted."]}),"error"===u.status&&"number"==typeof u.failedCount&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:[u.failedCount," row",1===u.failedCount?"":"s"," failed. Fix the errors and try again."]}),"success"===u.status&&null!==p&&(0,s.jsxs)("p",{className:"mt-2 text-xs text-slate-500",children:["Redirecting back to Dispatch List in ",p,"..."]}),(null===(e=u.results)||void 0===e?void 0:e.length)?(0,s.jsx)("ul",{className:"mt-3 space-y-2 text-xs text-slate-600",children:u.results.map(e=>{var t;return(0,s.jsxs)("li",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("span",{className:"font-semibold",children:["Row ",e.rowIndex+1]}),(0,s.jsx)("span",{className:"created"===e.status?"text-emerald-600":"text-rose-600",children:"created"===e.status?"created":"error"}),e.errors?(0,s.jsx)("span",{children:(t=e.errors)?Object.values(t).join("; "):""}):null]},"".concat(e.status,"-").concat(e.rowIndex))})}):null]})]})}function $(){return(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)(q,{})})}}},function(e){e.O(0,[554,955,971,117,744],function(){return e(e.s=3570)}),_N_E=e.O()}]);