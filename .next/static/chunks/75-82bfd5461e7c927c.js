(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{4075:function(e,t,r){Promise.resolve().then(r.bind(r,4852))},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var s=r(7437),a=r(2265),n=r(7053),d=r(535),l=r(3448);let i=(0,d.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:d,asChild:o=!1,...c}=e,m=o?n.g7:"button";return(0,s.jsx)(m,{className:(0,l.cn)(i({variant:a,size:d,className:r})),ref:t,...c})});o.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return d},aY:function(){return c},ll:function(){return i}});var s=r(7437),a=r(2265),n=r(3448);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,"data-slot":"card",className:(0,n.cn)("rounded-xl border bg-card text-card-foreground","shadow-[0_2px_8px_rgba(0,0,0,0.08)]",r),...a})});d.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,"data-slot":"card-header",className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return d}});var s=r(7437),a=r(2265),n=r(3448);let d=a.forwardRef((e,t)=>{let{className:r,type:a,...d}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...d})});d.displayName="Input"},8752:function(e,t,r){"use strict";r.d(t,{pm:function(){return u}});var s=r(2265);let a=0,n=new Map,d=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?d(r):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],o={toasts:[]};function c(e){o=l(o,e),i.forEach(e=>{e(o)})}function m(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=s.useState(o);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4881:function(e,t,r){"use strict";r.d(t,{H:function(){return o},a:function(){return c}});var s=r(7437),a=r(2265);let n=(0,a.createContext)(void 0),d="user",l="token",i="auth_last_active";function o(e){let{children:t}=e,[r,o]=(0,a.useState)({user:null,token:null,isReady:!1}),c=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=localStorage.getItem(d),t=localStorage.getItem(l),r=localStorage.getItem(i),s=Date.now(),a=r?Number(r):s,n=null,m=null;if(e&&t){let o=Number.isFinite(a)?a:s;if(r&&Number.isFinite(a)?c.current=o:(localStorage.setItem(i,String(s)),c.current=s),s-o<=36e5)try{n=JSON.parse(e),m=t}catch(e){localStorage.removeItem(d),localStorage.removeItem(l),localStorage.removeItem(i)}else localStorage.removeItem(d),localStorage.removeItem(l),localStorage.removeItem(i)}else(e||t)&&(localStorage.removeItem(d),localStorage.removeItem(l),localStorage.removeItem(i));o({user:n,token:m,isReady:!0})},[]);let m=(0,a.useCallback)((e,t)=>{localStorage.setItem(d,JSON.stringify(e)),localStorage.setItem(l,t);let r=Date.now();localStorage.setItem(i,String(r)),c.current=r,o({user:e,token:t,isReady:!0})},[]),u=(0,a.useCallback)(()=>{localStorage.removeItem(d),localStorage.removeItem(l),localStorage.removeItem(i),c.current=0,o(e=>({user:null,token:null,isReady:e.isReady}))},[]),x=(0,a.useCallback)(e=>{o(t=>{if(!t.user)return t;let r={...t.user,...e};return localStorage.setItem(d,JSON.stringify(r)),{...t,user:r}})},[]);return(0,a.useEffect)(()=>{if(!r.user||!r.token)return;let e=()=>{let e=Date.now();e-c.current<3e4||(c.current=e,localStorage.setItem(i,String(e)))},t=["mousemove","mousedown","keydown","scroll","touchstart"];t.forEach(t=>window.addEventListener(t,e,{passive:!0}));let s=window.setInterval(()=>{let e=localStorage.getItem(i),t=e?Number(e):0;t&&Date.now()-t>36e5&&u()},6e4);return()=>{t.forEach(t=>window.removeEventListener(t,e)),window.clearInterval(s)}},[r.user,r.token,u]),(0,s.jsx)(n.Provider,{value:{user:r.user,token:r.token,login:m,logout:u,updateUser:x,isAuthenticated:!!r.user&&!!r.token,isReady:r.isReady},children:t})}function c(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n},o:function(){return d}});var s=r(1994),a=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}function d(e){return e?new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}},4852:function(e,t,r){"use strict";r.d(t,{PrealertPage:function(){return z}});var s=r(7437),a=r(2265),n=r(9376),d=r(4881),l=r(9820),i=r(2381),o=r(279),c=r(3619),m=r(875),u=r(2135),x=r(401),h=r(3448);let f=c.fC;c.ZA;let p=c.B4,g=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(c.xz,{ref:t,className:(0,h.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[a,(0,s.jsx)(c.JO,{asChild:!0,children:(0,s.jsx)(m.Z,{className:"h-4 w-4 opacity-50"})})]})});g.displayName=c.xz.displayName;let b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(c.u_,{ref:t,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})})});b.displayName=c.u_.displayName;let j=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(c.$G,{ref:t,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(m.Z,{className:"h-4 w-4"})})});j.displayName=c.$G.displayName;let v=a.forwardRef((e,t)=>{let{className:r,children:a,position:n="popper",...d}=e;return(0,s.jsx)(c.h_,{children:(0,s.jsxs)(c.VY,{ref:t,className:(0,h.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...d,children:[(0,s.jsx)(b,{}),(0,s.jsx)(c.l_,{className:(0,h.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(j,{})]})})});v.displayName=c.VY.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(c.__,{ref:t,className:(0,h.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=c.__.displayName;let N=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(c.ck,{ref:t,className:(0,h.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(c.wU,{children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(c.eT,{children:a})]})});N.displayName=c.ck.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(c.Z0,{ref:t,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=c.Z0.displayName;var w=r(8752),y=r(1723),k=r(9663),S=r(3639),C=r(5302),A=r(4924),I=r(2720),E=r(3247),T=r(2735),P=r(6266);let R="soc5_dispatch_reports",_=[{name:"Angongo Hub",batches:["Batch 1","Batch 2"]},{name:"Lipa Hub",batches:["Batch 1"]},{name:"Sto Tomas Hub",batches:["Batch 1","Batch 2","Batch 3"]}];function O(e){if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function D(e){if(!e)return"";let t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?'"'.concat(t.replace(/\"/g,'""'),'"'):t}function B(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=["Pending","Acknowledged","Pending_Edit","Confirmed"],r=["OpsCoor1","PIC2","OpsCoor3","PIC4","User5","User6"],s=["Team A","Team B","Team C"],a=_.map(e=>e.name);return Array.from({length:e}).map((e,n)=>{let d=a[n%a.length],l=_.find(e=>e.name===d).batches,i=l[n%l.length],o=t[n%t.length],c=r[n%r.length],m="Pending"===o?void 0:s[n%s.length],u="PLT-".concat((100+n).toString().slice(-3)),x="2026-01-".concat(String(n%28+1).padStart(2,"0")),h=new Date(Date.now()-(n+1)*12e4).toISOString(),f="Pending_Edit"===o?"LH trip mismatch":void 0,p="Pending_Edit"===o?[{id:"edit-".concat(n),remarks:"Updated remarks after review.",reason:f||"",editor:c,timestamp:h}]:[];return{id:"r".concat(n+1),status:o,reporter:c,hub:d,batch:i,lh_trip:"LH".concat(100+n),plate:u,date:x,dataTeam:m,submittedBy:c,notes:"Sample note for report ".concat(n+1),createdAt:h,statusUpdatedAt:h,ackBy:"Pending"===o?void 0:m,ackAt:"Pending"===o?void 0:h,confirmedBy:"Confirmed"===o?m:void 0,confirmedAt:"Confirmed"===o?h:void 0,pendingEditReason:f,editCount:p.length,editHistory:p}})}function z(){let[e,t]=(0,a.useState)(""),[r,c]=(0,a.useState)("all"),[m,u]=(0,a.useState)(""),x=new Date().toISOString().slice(0,10),[h,b]=(0,a.useState)(x),[j,z]=(0,a.useState)(1),[Z,L]=(0,a.useState)(10),[H,U]=(0,a.useState)(()=>(function(){let e=window.localStorage.getItem(R);if(!e)return B(30);try{let t=JSON.parse(e);if(Array.isArray(t))return t}catch(e){}return B(30)})()),[M,V]=(0,a.useState)(null),[q,J]=(0,a.useState)(!1),[K,Y]=(0,a.useState)(null),[F,G]=(0,a.useState)(!1),[W,$]=(0,a.useState)({}),[X,Q]=(0,a.useState)(""),[ee,et]=(0,a.useState)(""),er=(0,a.useRef)(null),es=(0,a.useRef)(null),ea=(0,a.useRef)({}),{toast:en}=(0,w.pm)(),{user:ed}=(0,d.a)(),el=(0,n.usePathname)(),ei=(null==el?void 0:el.startsWith("/data-team"))||(null==ed?void 0:ed.role)==="Data Team"||(null==ed?void 0:ed.role)==="Admin";(0,a.useEffect)(()=>{window.localStorage.setItem(R,JSON.stringify(H))},[H]);let eo=(0,a.useCallback)(e=>!!ed&&(e.submittedByOpsId&&ed.ops_id?e.submittedByOpsId===ed.ops_id:e.submittedBy===ed.name||e.reporter===ed.name),[ed]),ec=(0,a.useMemo)(()=>ei?H.some(e=>"Pending"===e.status):H.some(e=>"Pending_Edit"===e.status&&eo(e)),[H,ei,eo]);(0,a.useEffect)(()=>{if(!ec){er.current&&(clearInterval(er.current),er.current=null);return}let e=()=>{let e=window.AudioContext||window.webkitAudioContext;if(!e)return;es.current||(es.current=new e);let t=es.current;"suspended"===t.state&&t.resume().catch(()=>{});let r=t.createOscillator(),s=t.createGain();r.type="sine",r.frequency.value=880,s.gain.value=.08,r.connect(s),s.connect(t.destination),r.start(),r.stop(t.currentTime+.2)};return e(),er.current||(er.current=setInterval(e,1500)),()=>{er.current&&(clearInterval(er.current),er.current=null)}},[ec]),(0,a.useEffect)(()=>{if(!ed||!ei)return;let e=()=>{U(e=>{let t=!1,r=Date.now(),s=e.map(e=>{if("Pending"!==e.status||e.dataTeam)return e;let s=new Date(e.statusUpdatedAt||e.createdAt).getTime();return Number.isNaN(s)||r-s<3e5?e:(t=!0,{...e,dataTeam:ed.name,dataTeamOpsId:ed.ops_id})});return t?s:e})};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[ed,ei]),(0,a.useEffect)(()=>{let e=ea.current,t={};H.forEach(e=>{t[e.id]=e.status}),!ei&&ed&&H.forEach(t=>{if(!eo(t))return;let r=e[t.id];r&&r!==t.status&&"Acknowledged"===t.status&&t.ackBy&&en({title:"Report acknowledged",description:"".concat(t.id," acknowledged by ").concat(t.ackBy)})}),ea.current=t},[H,ei,eo,en,ed]);let em=(0,a.useMemo)(()=>{let e={};return H.forEach(t=>e[t.hub]=(e[t.hub]||0)+1),e},[H]),eu=(0,a.useMemo)(()=>h?H.filter(e=>e.date===h):H,[H,h]),ex=eu.filter(e=>"Pending"===e.status).length,eh=eu.filter(e=>"Acknowledged"===e.status).length,ef=eu.filter(e=>"Confirmed"===e.status).length,ep=(0,a.useMemo)(()=>H.filter(t=>{if(m&&t.hub!==m||"all"!==r&&("Pending"===r&&"Pending"!==t.status||"Acknowledged"===r&&"Acknowledged"!==t.status||"Pending_Edit"===r&&"Pending_Edit"!==t.status||"Confirmed"===r&&"Confirmed"!==t.status)||h&&t.date!==h)return!1;if(e){let r=e.toLowerCase();if(!(t.reporter.toLowerCase().includes(r)||t.hub.toLowerCase().includes(r)||t.batch.toLowerCase().includes(r)||(t.lh_trip||"").toLowerCase().includes(r)||(t.plate||"").toLowerCase().includes(r)))return!1}return!0}),[H,m,r,h,e]),eg=Math.max(1,Math.ceil(ep.length/Z)),eb=ep.slice((j-1)*Z,j*Z),ej=e=>{switch(e){case"Pending":return{label:"Pending",icon:(0,s.jsx)(y.Z,{className:"h-4 w-4 text-yellow-600"}),className:"bg-yellow-50 text-yellow-700 border border-yellow-200"};case"Acknowledged":return{label:"Acknowledged",icon:(0,s.jsx)(k.Z,{className:"h-4 w-4 text-blue-600"}),className:"bg-blue-50 text-blue-700 border border-blue-200"};case"Pending_Edit":return{label:"Pending Edit",icon:(0,s.jsx)(S.Z,{className:"h-4 w-4 text-red-600"}),className:"bg-red-50 text-red-700 border border-red-200"};case"Confirmed":return{label:"Confirmed",icon:(0,s.jsx)(C.Z,{className:"h-4 w-4 text-green-600"}),className:"bg-green-50 text-green-700 border border-green-200"};default:return{label:e,icon:null,className:"bg-muted text-muted-foreground"}}},ev="Pending"===r,eN="Acknowledged"===r,ew="Confirmed"===r,ey=(e,t)=>{V({hub:e,batch:t}),J(!0)},ek=e=>{Y(e),Q(e.pendingEditReason||""),et(""),G(!0)},eS=(e,t)=>{U(r=>{let s=!1,a=r.map(r=>{if(r.id!==e)return r;let a=t(r);return a!==r&&(s=!0),a});return s?a:r})},eC=e=>{if(!ed){en({variant:"destructive",title:"Login required",description:"Please log in first."});return}eS(e.id,e=>e.dataTeam?e:{...e,dataTeam:ed.name,dataTeamOpsId:ed.ops_id}),en({title:"Ownership assigned",description:"Assigned to ".concat(ed.name)})},eA=e=>{if(!ed)return;let t=new Date().toISOString();eS(e.id,e=>"Pending"!==e.status?e:{...e,status:"Acknowledged",ackBy:ed.name,ackAt:t,dataTeam:e.dataTeam||ed.name,dataTeamOpsId:e.dataTeamOpsId||ed.ops_id,statusUpdatedAt:t}),en({title:"Acknowledged",description:"".concat(e.id," acknowledged by ").concat(ed.name)})},eI=e=>{if(!ed)return;if(!X.trim()){en({variant:"destructive",title:"Reason required",description:"Add a reason before sending Pending Edit."});return}let t=new Date().toISOString();eS(e.id,e=>({...e,status:"Pending_Edit",pendingEditReason:X.trim(),ackBy:e.ackBy||ed.name,ackAt:e.ackAt||t,dataTeam:e.dataTeam||ed.name,dataTeamOpsId:e.dataTeamOpsId||ed.ops_id,statusUpdatedAt:t})),en({title:"Pending Edit sent",description:"".concat(e.id," returned to Ops PIC.")})},eE=e=>{if(!ed)return;let t=new Date().toISOString(),r={...e,status:"Confirmed",confirmedBy:ed.name,confirmedAt:t,dataTeam:e.dataTeam||ed.name,dataTeamOpsId:e.dataTeamOpsId||ed.ops_id,statusUpdatedAt:t};eS(e.id,()=>r);let s=[r.id,r.lh_trip||"",r.hub,r.batch,r.plate||"",r.status,r.confirmedBy||"",r.confirmedAt||""],a=new Blob(["".concat("dispatch_id,lh_trip,hub,batch,plate,status,confirmed_by,confirmed_at","\n").concat(s.map(D).join(","))],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(a),d=document.createElement("a");d.href=n,d.download="dispatch-".concat(r.id,".csv"),d.click(),window.URL.revokeObjectURL(n),en({title:"Confirmed",description:"CSV downloaded. Seatalk and email dispatch queued."})},eT=e=>{if(!ed)return;if(!ee.trim()){en({variant:"destructive",title:"Remarks required",description:"Add remarks before resubmitting."});return}let t=new Date().toISOString();eS(e.id,e=>{let r={id:"".concat(e.id,"-").concat(Date.now()),remarks:ee.trim(),reason:e.pendingEditReason||"",editor:ed.name,timestamp:t},s=e.editHistory?[...e.editHistory,r]:[r];return{...e,status:"Pending",pendingEditReason:void 0,editCount:(e.editCount||0)+1,editHistory:s,notes:ee.trim(),statusUpdatedAt:t}}),en({title:"Resubmitted",description:"".concat(e.id," returned to Data Team queue.")}),et("")};return(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)("aside",{className:"w-72",children:(0,s.jsxs)(l.Zb,{className:"sticky top-6",children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)(l.ll,{className:"text-lg",children:"Hubs"}),(0,s.jsx)(l.SZ,{className:"text-sm",children:"Compact list"})]}),(0,s.jsx)(l.aY,{children:(0,s.jsx)("ul",{className:"space-y-3 relative max-h-[60vh] overflow-y-auto pr-2",children:_.map(e=>(0,s.jsxs)("li",{className:"relative",children:[(0,s.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,s.jsxs)("button",{"aria-expanded":!!m&&m===e.name,"aria-controls":"batches-".concat(e.name),onClick:()=>{u(m===e.name?"":e.name),$(t=>({...t,[e.name]:!t[e.name]})),z(1)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),u(m===e.name?"":e.name),$(t=>({...t,[e.name]:!t[e.name]})),z(1))},className:"flex items-center gap-3 px-3 py-3 rounded w-full text-left ".concat(m===e.name?"bg-muted/20":"hover:bg-muted/10"),children:[(0,s.jsx)(A.Z,{className:"h-5 w-5 text-gradient"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[em[e.name]||0," reports"]})]})]})}),(0,s.jsx)("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-muted/20 ml-1","aria-hidden":!0}),(0,s.jsx)("ul",{id:"batches-".concat(e.name),className:"ml-9 mt-2 text-base text-muted-foreground space-y-2 ".concat(W[e.name]?"block":"hidden"),children:e.batches.map(t=>(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"flex items-center gap-2 py-2 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-400 rounded",onClick:()=>ey(e.name,t),onKeyDown:r=>{"Enter"===r.key&&ey(e.name,t)},children:[(0,s.jsx)(I.Z,{className:"h-4 w-4 text-blue-500 mr-1","aria-hidden":!0}),(0,s.jsx)("span",{children:t})]})},t))})]},e.name))})})]})}),(0,s.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{role:"button",tabIndex:0,"aria-label":"Pending reports","aria-pressed":ev,onClick:()=>{c(ev?"all":"Pending"),z(1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c(ev?"all":"Pending"),z(1))},className:"cursor-pointer bg-white rounded-xl shadow-sm p-4 flex items-center gap-4 transform transition-all duration-150 border-r border-muted/20 pr-6 ".concat(ev?"ring-2 ring-yellow-300 scale-105":"hover:scale-105"),children:[(0,s.jsx)("div",{className:"".concat(ev?"inline-flex items-center justify-center h-16 w-16 rounded-full bg-yellow-600 text-white":"inline-flex items-center justify-center h-16 w-16 rounded-full bg-yellow-50 text-yellow-700"),children:(0,s.jsx)(y.Z,{className:"h-8 w-8","aria-hidden":!0})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Pending"}),(0,s.jsx)("div",{className:"text-3xl font-extrabold",children:ex}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:h})]})]}),(0,s.jsxs)("div",{role:"button",tabIndex:0,"aria-label":"Acknowledged reports","aria-pressed":eN,onClick:()=>{c(eN?"all":"Acknowledged"),z(1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c(eN?"all":"Acknowledged"),z(1))},className:"cursor-pointer bg-white rounded-xl shadow-sm p-4 flex items-center gap-4 transform transition-all duration-150 border-r border-muted/20 pr-6 ".concat(eN?"ring-2 ring-blue-300 scale-105":"hover:scale-105"),children:[(0,s.jsx)("div",{className:"".concat(eN?"inline-flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white":"inline-flex items-center justify-center h-16 w-16 rounded-full bg-blue-50 text-blue-700"),children:(0,s.jsx)(k.Z,{className:"h-8 w-8","aria-hidden":!0})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Acknowledged"}),(0,s.jsx)("div",{className:"text-3xl font-extrabold",children:eh}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:h})]})]}),(0,s.jsxs)("div",{role:"button",tabIndex:0,"aria-label":"Confirmed reports","aria-pressed":ew,onClick:()=>{c(ew?"all":"Confirmed"),z(1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c(ew?"all":"Confirmed"),z(1))},className:"cursor-pointer bg-white rounded-xl shadow-sm p-4 flex items-center gap-4 transform transition-all duration-150 ".concat(ew?"ring-2 ring-green-300 scale-105":"hover:scale-105"),children:[(0,s.jsx)("div",{className:"".concat(ew?"inline-flex items-center justify-center h-16 w-16 rounded-full bg-green-600 text-white":"inline-flex items-center justify-center h-16 w-16 rounded-full bg-green-50 text-green-700"),children:(0,s.jsx)(C.Z,{className:"h-8 w-8","aria-hidden":!0})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Confirmed"}),(0,s.jsx)("div",{className:"text-3xl font-extrabold",children:ef}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:h})]})]})]})}),(0,s.jsx)("div",{className:"my-6","aria-hidden":!0,children:(0,s.jsx)("div",{className:"h-0.5 w-full rounded shadow-sm bg-gradient-to-r from-sky-400 to-indigo-600"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(E.Z,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(o.I,{placeholder:"Search reporter, hub, LHTrip, plate...",className:"pl-11 w-96 text-base",value:e,onChange:e=>{t(e.target.value),z(1)},"aria-label":"Search reports"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(f,{value:r,onValueChange:e=>{c(e),z(1)},children:[(0,s.jsx)(g,{children:(0,s.jsx)(p,{placeholder:"All statuses"})}),(0,s.jsxs)(v,{children:[(0,s.jsx)(N,{value:"all",children:"All statuses"}),(0,s.jsx)(N,{value:"Pending",children:"Pending"}),(0,s.jsx)(N,{value:"Acknowledged",children:"Acknowledged"}),(0,s.jsx)(N,{value:"Pending_Edit",children:"Pending Edit"}),(0,s.jsx)(N,{value:"Confirmed",children:"Confirmed"})]})]}),(0,s.jsx)(o.I,{type:"date",value:h,onChange:e=>{b(e.target.value),z(1)},"aria-label":"Date"}),(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{t(""),u(""),c("all"),b(""),z(1)},children:"Reset"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm",children:"Rows"}),(0,s.jsxs)(f,{value:String(Z),onValueChange:e=>{L(Number(e)),z(1)},children:[(0,s.jsx)(g,{children:(0,s.jsx)(p,{placeholder:"10"})}),(0,s.jsxs)(v,{children:[(0,s.jsx)(N,{value:"10",children:"10"}),(0,s.jsx)(N,{value:"25",children:"25"}),(0,s.jsx)(N,{value:"50",children:"50"})]})]})]}),(0,s.jsxs)(i.z,{variant:"outline",onClick:()=>{en({title:"Export",description:"CSV export is not yet configured."})},children:[(0,s.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)(l.ll,{className:"text-xl",children:"Dispatch Entries"}),(0,s.jsxs)(l.SZ,{className:"text-sm",children:["Showing ",ep.length," entries, page ",j," / ",eg]})]}),(0,s.jsx)(l.aY,{children:0===ep.length?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"text-muted-foreground text-base",children:"No entries found"})}):(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full text-base border-collapse border border-muted/20",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Status"}),(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Reporter"}),(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Hub"}),(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Batch"}),(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"LHTrip"}),(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Plate"}),(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Date"}),(0,s.jsx)("th",{className:"p-3 text-center border-r border-muted/20 last:border-r-0",children:"Owner"}),(0,s.jsx)("th",{className:"p-3 text-center last:border-r-0",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:eb.map(e=>{let t=ej(e.status),r=ei?"Pending"===e.status:"Pending_Edit"===e.status&&eo(e);return(0,s.jsxs)("tr",{className:"border-b hover:shadow-md hover:-translate-y-0.5 transition-all group ".concat(r?"blink-red ring-1 ring-red-300":""),tabIndex:0,onKeyDown:t=>{"Enter"===t.key&&ek(e)},"aria-label":"Report ".concat(e.id," by ").concat(e.reporter),children:[(0,s.jsx)("td",{className:"p-3 align-middle text-center border-r border-muted/20 last:border-r-0",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-medium ".concat(t.className),children:[t.icon,(0,s.jsx)("span",{className:"whitespace-nowrap",children:t.label})]})}),(0,s.jsx)("td",{className:"p-3 align-middle text-base border-r border-muted/20 last:border-r-0",children:e.reporter}),(0,s.jsx)("td",{className:"p-3 align-middle text-base border-r border-muted/20 last:border-r-0",children:e.hub}),(0,s.jsx)("td",{className:"p-3 align-middle text-base border-r border-muted/20 last:border-r-0",children:e.batch}),(0,s.jsx)("td",{className:"p-3 align-middle font-mono border-r border-muted/20 last:border-r-0",children:e.lh_trip}),(0,s.jsx)("td",{className:"p-3 align-middle font-mono border-r border-muted/20 last:border-r-0",children:e.plate}),(0,s.jsx)("td",{className:"p-3 align-middle border-r border-muted/20 last:border-r-0",children:e.date}),(0,s.jsx)("td",{className:"p-3 align-middle border-r border-muted/20 last:border-r-0",children:e.dataTeam||"-"}),(0,s.jsx)("td",{className:"p-3 align-middle",children:(0,s.jsx)(i.z,{size:"sm",variant:"ghost","aria-label":"Open details for ".concat(e.id),onClick:()=>ek(e),children:(0,s.jsx)(P.Z,{})})})]},e.id)})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",eb.length," of ",ep.length," entries"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>z(Math.max(1,j-1)),disabled:1===j,children:"Previous"}),(0,s.jsxs)("div",{className:"text-sm",children:["Page ",j," / ",eg]}),(0,s.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>z(Math.min(eg,j+1)),disabled:j===eg,children:"Next"})]})]})]})})]}),q&&M&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,s.jsxs)("div",{className:"w-full max-w-3xl bg-background rounded shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold",children:[M.hub," - ",M.batch]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{V(null),J(!1)},children:"Close"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Reports in this batch"}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-72",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Reporter"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Hub"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Batch"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"LHTrip"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Plate"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Date"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Owner"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Status"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:H.filter(e=>e.hub===M.hub&&e.batch===M.batch).map(e=>(0,s.jsxs)("tr",{className:"border-b hover:bg-muted/10",children:[(0,s.jsx)("td",{className:"p-2",children:e.reporter}),(0,s.jsx)("td",{className:"p-2",children:e.hub}),(0,s.jsx)("td",{className:"p-2",children:e.batch}),(0,s.jsx)("td",{className:"p-2",children:e.lh_trip}),(0,s.jsx)("td",{className:"p-2",children:e.plate}),(0,s.jsx)("td",{className:"p-2",children:e.date}),(0,s.jsx)("td",{className:"p-2",children:e.dataTeam||"-"}),(0,s.jsx)("td",{className:"p-2",children:e.status}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>ek(e),children:"Details"})})]},e.id))})]})})]})]})}),F&&K&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,s.jsxs)("div",{className:"w-full max-w-2xl bg-background rounded shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold",children:"Report Details"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",K.id," - ",K.date]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(i.z,{variant:"ghost",onClick:()=>{Y(null),G(!1),Q(""),et("")},children:"Close"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-base",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Reporter"}),(0,s.jsx)("div",{className:"font-medium",children:K.reporter})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Hub"}),(0,s.jsx)("div",{className:"font-medium",children:K.hub})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Batch"}),(0,s.jsx)("div",{className:"font-medium",children:K.batch})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Owner"}),(0,s.jsx)("div",{className:"font-medium",children:K.dataTeam||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"LH Trip"}),(0,s.jsx)("div",{className:"font-mono",children:K.lh_trip})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Plate"}),(0,s.jsx)("div",{className:"font-mono",children:K.plate})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Status"}),(0,s.jsx)("div",{className:"font-medium",children:K.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Acknowledged"}),(0,s.jsx)("div",{className:"font-medium",children:K.ackBy?"".concat(K.ackBy," (").concat(O(K.ackAt),")"):"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Confirmed"}),(0,s.jsx)("div",{className:"font-medium",children:K.confirmedBy?"".concat(K.confirmedBy," (").concat(O(K.confirmedAt),")"):"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Notes"}),(0,s.jsx)("div",{className:"font-medium",children:K.notes||"-"})]})]}),K.pendingEditReason&&(0,s.jsxs)("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:["Pending Edit Reason: ",K.pendingEditReason]}),K.editHistory&&K.editHistory.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Edit History"}),(0,s.jsx)("div",{className:"space-y-2",children:K.editHistory.map(e=>(0,s.jsxs)("div",{className:"rounded border border-muted/30 p-3 text-sm",children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.editor," - ",O(e.timestamp)]}),(0,s.jsxs)("div",{className:"text-muted-foreground",children:["Reason: ",e.reason||"-"]}),(0,s.jsxs)("div",{children:["Remarks: ",e.remarks]})]},e.id))})]}),ei&&(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[!K.dataTeam&&(0,s.jsx)(i.z,{variant:"outline",onClick:()=>eC(K),children:"Take Ownership"}),"Pending"===K.status&&(0,s.jsx)(i.z,{onClick:()=>eA(K),children:"Acknowledge"}),("Pending"===K.status||"Acknowledged"===K.status)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm text-muted-foreground",children:"Pending Edit Reason"}),(0,s.jsx)("textarea",{value:X,onChange:e=>Q(e.target.value),className:"w-full min-h-[90px] rounded border border-muted/30 p-2 text-sm",placeholder:"Describe the discrepancy..."}),(0,s.jsx)(i.z,{variant:"destructive",onClick:()=>eI(K),children:"Send Pending Edit"})]}),"Acknowledged"===K.status&&(0,s.jsx)(i.z,{onClick:()=>eE(K),children:"Confirm and Download CSV"})]}),!ei&&"Pending_Edit"===K.status&&eo(K)&&(0,s.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,s.jsx)("label",{className:"text-sm text-muted-foreground",children:"Updated Remarks"}),(0,s.jsx)("textarea",{value:ee,onChange:e=>et(e.target.value),className:"w-full min-h-[90px] rounded border border-muted/30 p-2 text-sm",placeholder:"Update remarks and resubmit..."}),(0,s.jsx)(i.z,{onClick:()=>eT(K),children:"Resubmit Report"})]})]})})]})]})}}}]);